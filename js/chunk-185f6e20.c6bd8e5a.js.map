{"version":3,"sources":["webpack:///./src/pages/Login.vue?6954","webpack:///./src/components/account-login/account-login.vue?380c","webpack:///src/components/account-login/account-login.vue","webpack:///./src/components/account-login/account-login.vue?b096","webpack:///./src/components/account-login/account-login.vue","webpack:///./src/components/account-login/index.js","webpack:///src/pages/Login.vue","webpack:///./src/pages/Login.vue?51a5","webpack:///./src/pages/Login.vue","webpack:///./src/components/weixin-login/weixin-login.vue?161a","webpack:///src/components/weixin-login/weixin-login.vue","webpack:///./src/components/weixin-login/weixin-login.vue?c88f","webpack:///./src/components/weixin-login/weixin-login.vue","webpack:///./src/components/weixin-login/index.js","webpack:///./src/components/phone-login/phone-login.vue?b530","webpack:///src/components/phone-login/phone-login.vue","webpack:///./src/components/phone-login/phone-login.vue?1ec7","webpack:///./src/components/phone-login/phone-login.vue","webpack:///./src/components/phone-login/index.js","webpack:///./src/pages/Login.vue?ad47","webpack:///./src/components/phone-login/phone-login.vue?950a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","networkType","currentLoginType","on","success","loginSuccess","failed","loginFailed","attrs","href","click","$event","_e","type","wxLoginSuccess","staticRenderFns","account_loginvue_type_template_id_120120a6_render","ref","model","userLoginInfo","rules","validators","label","label-width","prop","placeholder","value","callback","$$v","$set","expression","nativeOn","keyup","_k","keyCode","key","handleLogin","account_loginvue_type_template_id_120120a6_staticRenderFns","account_loginvue_type_script_lang_js_","name","data","settingInfo","username","password","loging","required","message","trigger","methods","form","_this","$refs","validate","valid","loginRequest","console","log","usr","psw","_this2","loginParams","login","Object","then","resp","response","$emit","EmitModel","event","vn","$vnode","params","token","userInfo","user","$Message","error","msg","catch","err","account_login_account_loginvue_type_script_lang_js_","component","componentNormalizer","options","__file","account_login","accountLogin","Loginvue_type_script_lang_js_","components","phoneLogin","phone_login","components_account_login","weixinLogin","weixin_login","computed","currentNetworkType","set","get","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getSettingInfo","stop","apply","arguments","code","weixin","bindSuccess","bindFailed","$store","commit","$router","replace","_getSettingInfo2","_callee2","_context2","sent","t0","push","pages_Loginvue_type_script_lang_js_","Login_component","__webpack_exports__","id","_s","title","src","qrCode","wxLoginMsg","weixin_loginvue_type_script_lang_js_","props","String","default","wxUUID","getQRCode","_ref","status","result","imgData","getWxCode","uuid","_ref2","content","timer","setTimeout","clearTimeout","weixin_login_weixin_loginvue_type_script_lang_js_","gutter","span","captchaUrl","refreshCaptcha","loading","smsWait","sendSms","smsWaitTime","phone_loginvue_type_script_lang_js_","captcha","smsCode","phone","captchaUid","$route","mounted","watch","beforeDestroy","_sendSms","validateResp","_this3","warning","abrupt","sms","setInterval","clearInterval","captchaUuid","_this4","concat","image","phone_login_phone_loginvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_3e91cb96_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_3e91cb96_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_phone_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_phone_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-185f6e20.c6bd8e5a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.settingInfo)?_c('Layout',{staticClass:\"login-page\"},[_c('Row',{staticClass:\"login-header\"},[_c('Row',[_c('h1',{staticClass:\"login-title\"},[_vm._v(\"登录\")])])],1),(_vm.networkType === 2 && _vm.currentLoginType === 'phone')?[_c('Row',{staticClass:\"login-form\"},[_c('Row',{staticClass:\"form-body\"},[_c('phoneLogin',{on:{\"success\":_vm.loginSuccess,\"failed\":_vm.loginFailed}})],1),_c('div',{staticClass:\"login-footer\"},[_c('a',{attrs:{\"href\":\"javascript: void(0)\"},on:{\"click\":function($event){_vm.currentLoginType = 'wx'}}},[_vm._v(\"使用微信登录\")])])],1)]:_vm._e(),(_vm.networkType === 2 && _vm.currentLoginType === 'wx')?[_c('div',{staticClass:\"login-form\"},[_c('weixinLogin',{attrs:{\"type\":'login'},on:{\"success\":_vm.wxLoginSuccess}},[_c('div',{staticClass:\"login-footer\"},[_c('a',{attrs:{\"href\":\"javascript: void(0)\"},on:{\"click\":function($event){_vm.currentLoginType = 'phone'}}},[_vm._v(\"使用手机登录\")])])])],1)]:_vm._e(),(_vm.networkType === 1)?[_c('div',{staticClass:\"login-form\"},[_c('accountLogin',{on:{\"success\":_vm.loginSuccess,\"failed\":_vm.loginFailed}})],1)]:_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{staticClass:\"form-body\"},[_c('Form',{ref:\"accountForm\",attrs:{\"model\":_vm.userLoginInfo,\"rules\":_vm.validators}},[_c('FormItem',{attrs:{\"label\":\"账号\",\"label-width\":80,\"prop\":\"username\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.userLoginInfo.username),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"username\", $$v)},expression:\"userLoginInfo.username\"}})],1),_c('FormItem',{attrs:{\"label\":\"密码\",\"label-width\":80,\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.handleLogin('accountForm')}},model:{value:(_vm.userLoginInfo.password),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"password\", $$v)},expression:\"userLoginInfo.password\"}})],1)],1)],1),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleLogin('accountForm')}}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <Row class=\"form-body\">\n    <Form ref=\"accountForm\" :model=\"userLoginInfo\" :rules=\"validators\">\n      <FormItem label=\"账号\" :label-width=\"80\" prop=\"username\">\n        <Input type=\"text\" v-model=\"userLoginInfo.username\" placeholder=\"请输入账号\" />\n      </FormItem>\n      <FormItem label=\"密码\" :label-width=\"80\" prop=\"password\">\n        <Input type=\"password\" v-model=\"userLoginInfo.password\" placeholder=\"请输入密码\" @keyup.native.enter=\"handleLogin('accountForm')\"/>\n      </FormItem>\n    </Form>\n  </Row>\n  <Button type=\"primary\" @click=\"handleLogin('accountForm')\">登录</Button>\n</div>\n</template>\n\n<script>\nimport { LoginParamsModel, requestLogin } from '@/api/login'\nimport { EmitModel } from '@/libs/EmitModel'\n\nexport default {\n  name: 'account-login',\n  data () {\n    return {\n      settingInfo: null,\n      userLoginInfo: {\n        username: 'zhangsan1',\n        password: '123456'\n      },\n      loging: false,\n      validators: {\n        username: [\n          { required: true, message: '请输入账号', trigger: 'change' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  methods: {\n    handleLogin (form) {\n      this.loging = true\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          this.loginRequest(this.userLoginInfo.username, this.userLoginInfo.password, 2)\n        } else {\n          console.log('表单验证未通过')\n        }\n        this.loging = false\n      })\n    },\n    loginRequest (usr, psw, type) {\n      const loginParams = new LoginParamsModel(usr, psw, type)\n      requestLogin(loginParams).then(resp => {\n        if (resp.response.success) {\n          this.$emit('success', new EmitModel({\n            name: 'success',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: resp.data.token,\n              userInfo: resp.data.user\n            }\n          }))\n        } else {\n          this.$Message.error(resp.response.msg)\n          this.$emit('failed', new EmitModel({\n            name: 'failed',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: null,\n              userInfo: null\n            }\n          }))\n        }\n        this.loging = false\n      }).catch(err => {\n        console.error(err)\n        this.loging = false\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./account-login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./account-login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./account-login.vue?vue&type=template&id=120120a6&\"\nimport script from \"./account-login.vue?vue&type=script&lang=js&\"\nexport * from \"./account-login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"account-login.vue\"\nexport default component.exports","import accountLogin from './account-login'\nexport default accountLogin\n","<template lang=\"pug\">\nLayout.login-page(v-if='settingInfo')\n  Row.login-header\n    Row\n      h1.login-title 登录\n  // 手机登录\n  template(v-if=\"networkType === 2 && currentLoginType === 'phone'\")\n    Row.login-form\n      Row.form-body\n        phoneLogin(@success='loginSuccess', @failed='loginFailed')\n      .login-footer\n        a(href='javascript: void(0)', @click=\"currentLoginType = 'wx'\") 使用微信登录\n  // 微信登录\n  template(v-if=\"networkType === 2 && currentLoginType === 'wx'\")\n    .login-form\n      weixinLogin(:type=\"'login'\" @success=\"wxLoginSuccess\")\n        .login-footer\n          a(href='javascript: void(0)', @click=\"currentLoginType = 'phone'\") 使用手机登录\n  // 账户登录\n  template(v-if='networkType === 1')\n    .login-form\n      accountLogin(@success='loginSuccess', @failed='loginFailed')\n</template>\n\n<script>\nimport { getSettingInfo } from '@/api/login'\nimport { wxLogin } from '../api/weixin'\nimport phoneLogin from '@/components/phone-login'\nimport accountLogin from '@/components/account-login'\nimport weixinLogin from '@/components/weixin-login'\n\nexport default {\n  name: 'login-page',\n  components: {\n    phoneLogin,\n    accountLogin,\n    weixinLogin\n  },\n  data () {\n    return {\n      settingInfo: null,\n      networkType: 1,\n      currentLoginType: 'wx'\n    }\n  },\n  computed: {\n    currentNetworkType: {\n      set (value) {\n        this.networkType = +value\n      },\n      get () {\n        return '' + this.networkType\n      }\n    }\n  },\n  async created () {\n    await this.getSettingInfo()\n  },\n  methods: {\n    wxLoginSuccess (code) {\n      wxLogin({ code }).then(resp => {\n        if (resp.response.success) {\n          this.bindSuccess(resp.data.token, resp.data.user)\n        } else {\n          console.error('微信登录失败')\n          this.bindFailed(resp.response.msg)\n        }\n      }).catch(err => {\n        console.error(err)\n        this.loginFailed(err)\n      })\n    },\n    bindSuccess (token, userInfo) {\n      this.$store.commit('user/setToken', token)\n      this.$store.commit('user/setUserInfo', userInfo)\n      this.$router.replace({ name: 'Home' })\n    },\n    bindFailed (msg) {\n      this.$Message.error(msg)\n    },\n    async getSettingInfo () {\n      try {\n        const data = await getSettingInfo()\n        this.networkType = data.data.networkType\n        this.settingInfo = data\n      } catch (err) {\n        console.error(err)\n      }\n    },\n    loginSuccess (data) {\n      this.$store.commit('user/setToken', data.params.token)\n      this.$store.commit('user/setUserInfo', data.params.userInfo)\n      this.$Message.success('登录成功！')\n      this.$router.push({ name: 'Home' })\n    },\n    loginFailed (data) {\n      this.$Message.error('登录失败！')\n      console.log(data)\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.login-page\n  // min-width 50vw\n  position absolute\n  top 5%\n  left 50%\n  transform translateX(-50%)\n  text-align center\n\n  .login-form\n    // border-radius 0.2rem\n    // box-shadow 0 0 1px 0 rgba(0,0,0,0.1)\n    display flex\n    flex-direction column\n    justify-content center\n    align-items center\n    padding 0.5rem\n    margin 0.5rem\n    min-width 28rem\n    .form-body\n      width 100%\n      flex 1 1 auto\n      display flex\n      justify-content center\n      flex-wrap nowrap\n      &.wx\n        flex-direction column\n        align-items center\n\n    .login-footer\n      width 100%\n      padding 0.2rem\n      margin-top 0.5rem\n      text-align right\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3e91cb96&scoped=true&lang=pug&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=3e91cb96&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e91cb96\",\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',[_c('div',{attrs:{\"id\":\"qrcode\"}},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('img',{attrs:{\"src\":_vm.qrCode}}),_c('div',{staticClass:\"show-msg\"},[_vm._v(_vm._s(_vm.wxLoginMsg))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Layout>\n    <div id=\"qrcode\">\n      <h2>{{title}}</h2>\n      <img :src=\"qrCode\">\n      <div class=\"show-msg\">{{wxLoginMsg}}</div>\n    </div>\n  </Layout>\n</template>\n\n<script>\nimport { getQRCode, getWxCode } from '@/api/login'\nexport default {\n  name: 'weixin-login',\n  props: {\n    type: {\n      type: String,\n      required: false,\n      default: 'login'\n    },\n    title: String\n  },\n  data () {\n    return {\n      wxUUID: '',\n      qrCode: '',\n      wxLoginMsg: '请用微信扫描二维码登录'\n    }\n  },\n  created () {\n    this.getQRCode()\n  },\n  methods: {\n    getQRCode () {\n      getQRCode().then(({ status, result }) => {\n        this.wxUUID = result.wxUUID\n        this.qrCode = result.imgData\n        this.getWxCode(this.wxUUID)\n      })\n    },\n    getWxCode () {\n      getWxCode({\n        uuid: this.wxUUID\n      }).then(({ result, status, msg }) => {\n        if (status && status === 405) {\n          this.wxLoginMsg = msg\n          this.$emit('success', result.code)\n        } else if (status === 500) {\n          this.getQRCode()\n        } else {\n          if (status && status === 404) {\n            this.wxLoginMsg = msg.title + ', ' + msg.content\n          }\n          const timer = setTimeout(() => {\n            this.getWxCode()\n            clearTimeout(timer)\n          }, 2000)\n          console.log(result)\n        }\n      }).catch(err => {\n        const timer = setTimeout(() => {\n          this.getWxCode()\n          clearTimeout(timer)\n        }, 2000)\n        console.error(err)\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./weixin-login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./weixin-login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./weixin-login.vue?vue&type=template&id=6ac4b36c&\"\nimport script from \"./weixin-login.vue?vue&type=script&lang=js&\"\nexport * from \"./weixin-login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"weixin-login.vue\"\nexport default component.exports","import weixinLogin from './weixin-login'\nexport default weixinLogin\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"phoneForm\",attrs:{\"model\":_vm.userLoginInfo,\"rules\":_vm.validators}},[_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":90,\"prop\":\"captcha\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入验证码获取随机密码\"},model:{value:(_vm.userLoginInfo.captcha),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"captcha\", $$v)},expression:\"userLoginInfo.captcha\"}})],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('img',{attrs:{\"src\":_vm.captchaUrl},on:{\"click\":_vm.refreshCaptcha}})])],1)],1),_c('FormItem',{attrs:{\"label\":\"手机号码\",\"label-width\":90,\"prop\":\"phone\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{staticClass:\"phone-col\",attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入随机密码\"},model:{value:(_vm.userLoginInfo.phone),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"phone\", $$v)},expression:\"userLoginInfo.phone\"}})],1),_c('Col',{staticClass:\"button-col\",attrs:{\"span\":\"8\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.smsWait},on:{\"click\":_vm.sendSms}},[(!_vm.smsWait)?_c('span',[_vm._v(\"发送短信\")]):_c('span',[_vm._v(_vm._s((_vm.smsWaitTime + \"秒后重试\")))])])],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"短信验证码\",\"label-width\":90,\"prop\":\"smsCode\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入短信验证码\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.handleLogin('phoneForm')}},model:{value:(_vm.userLoginInfo.smsCode),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"smsCode\", $$v)},expression:\"userLoginInfo.smsCode\"}})],1),_c('Col',{attrs:{\"span\":\"8\"}})],1)],1)],1),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleLogin('phoneForm')}}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Form ref=\"phoneForm\" :model=\"userLoginInfo\" :rules=\"validators\">\n      <FormItem label=\"验证码\" :label-width=\"90\" prop=\"captcha\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\">\n            <Input type=\"text\" v-model=\"userLoginInfo.captcha\" placeholder=\"请输入验证码获取随机密码\" />\n          </Col>\n          <Col span=\"8\">\n            <img :src=\"captchaUrl\" @click=\"refreshCaptcha\">\n          </Col>\n        </Row>\n      </FormItem>\n\n      <FormItem label=\"手机号码\" :label-width=\"90\" prop=\"phone\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\" class=\"phone-col\">\n              <Input type=\"text\" v-model=\"userLoginInfo.phone\" placeholder=\"请输入随机密码\" />\n          </Col>\n          <Col span=\"8\" class=\"button-col\">\n              <Button type=\"primary\" :loading=\"smsWait\" @click=\"sendSms\">\n                <span v-if=\"!smsWait\">发送短信</span>\n                <span v-else>{{`${smsWaitTime}秒后重试`}}</span>\n              </Button>\n          </Col>\n      </Row>\n\n      </FormItem >\n\n      <FormItem label=\"短信验证码\" :label-width=\"90\" prop=\"smsCode\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\">\n            <Input type=\"text\" v-model=\"userLoginInfo.smsCode\" placeholder=\"请输入短信验证码\" @keyup.native.enter=\"handleLogin('phoneForm')\"/>\n          </Col>\n          <Col span=\"8\">\n          </Col>\n        </Row>\n      </FormItem>\n    </Form>\n    <Button type=\"primary\" @click=\"handleLogin('phoneForm')\">登录</Button>\n  </div>\n</template>\n\n<script>\nimport { LoginParamsModel, requestLogin, getSettingInfo } from '@/api/login'\nimport { sendSmsCode, getCaptcha, validateCaptcha } from '@/api/sms'\nimport { EmitModel } from '@/libs/EmitModel'\n\nexport default {\n  name: 'phone-login',\n  data () {\n    return {\n      settingInfo: null,\n      userLoginInfo: {\n        captcha: '',\n        smsCode: '',\n        phone: ''\n      },\n      loging: false,\n      validators: {\n        phone: [\n          { required: true, message: '请输入手机号码', trigger: 'change' }\n        ],\n        smsCode: [\n          { required: true, message: '请输入短信验证码', trigger: 'blur' }\n        ],\n        captcha: [\n          { required: true, message: '请输入验证码', trigger: 'change' }\n        ]\n      },\n      smsWait: false,\n      smsWaitTime: 60,\n      captchaUrl: '',\n      captchaUid: ''\n    }\n  },\n  computed: {\n    currentNetworkType: {\n      set (value) {\n        this.networkType = +value\n      },\n      get () {\n        return '' + this.networkType\n      }\n    }\n  },\n  created () {\n    this.getSettingInfo()\n    console.log(this.$route)\n  },\n  mounted () {\n    this.refreshCaptcha()\n  },\n  watch: {\n  },\n  beforeDestroy () {\n  },\n  methods: {\n    async getSettingInfo () {\n      try {\n        const data = await getSettingInfo()\n        this.networkType = data.data.networkType\n        this.settingInfo = data\n      } catch (err) {\n        console.error(err)\n      }\n    },\n    handleLogin (form) {\n      this.loging = true\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          this.loginRequest(this.userLoginInfo.phone, this.userLoginInfo.smsCode, 1)\n        } else {\n          console.log('表单验证未通过')\n        }\n        this.loging = false\n      })\n    },\n    loginRequest (usr, psw, type) {\n      const loginParams = new LoginParamsModel(usr, psw, type)\n      requestLogin(loginParams).then(resp => {\n        if (resp.response.success) {\n          this.$emit('success', new EmitModel({\n            name: 'success',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: resp.data.token,\n              userInfo: resp.data.user\n            }\n          }))\n        } else {\n          this.$Message.error(resp.response.msg)\n          this.$emit('failed', new EmitModel({\n            name: 'failed',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: null,\n              userInfo: null\n            }\n          }))\n        }\n        this.loging = false\n      }).catch(err => {\n        console.error(err)\n        this.loging = false\n      })\n    },\n    async sendSms () {\n      if (this.userLoginInfo.captcha.replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入验证码！')\n        return\n      }\n      if (('' + this.userLoginInfo.phone).replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入手机号码！')\n        return\n      }\n      const validateResp = await validateCaptcha({ captcha: this.userLoginInfo.captcha, uuid: this.captchaUid })\n      if (!validateResp.response.success) {\n        this.$Message.error('验证码错误，请重新输入！')\n        return\n      }\n      this.smsWait = true\n      this.smsWaitTime = 60\n      const timer = setInterval(() => {\n        if (this.smsWaitTime <= 1) {\n          clearInterval(timer)\n          this.smsWait = false\n        }\n        this.smsWaitTime = this.smsWaitTime - 1\n      }, 1000)\n      sendSmsCode({ phone: this.userLoginInfo.phone, type: 2, captcha: this.userLoginInfo.captcha, captchaUuid: this.captchaUid }).then(resp => {\n        if (resp.response.success) {\n          this.$Message.success('短信发送成功！')\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      })\n    },\n    refreshCaptcha () {\n      getCaptcha().then(resp => {\n        this.captchaUrl = `data:image;base64,${resp.data.image}`\n        this.captchaUid = resp.data.uuid\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./phone-login.vue?vue&type=template&id=0a4319bc&\"\nimport script from \"./phone-login.vue?vue&type=script&lang=js&\"\nexport * from \"./phone-login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./phone-login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"phone-login.vue\"\nexport default component.exports","import phoneLogin from './phone-login'\nexport default phoneLogin\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=3e91cb96&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=3e91cb96&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}