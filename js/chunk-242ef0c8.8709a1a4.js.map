{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./src/components/components/util.js","webpack:///./src/components/components/moneyInput.config.vue?d774","webpack:///src/components/components/moneyInput.config.vue","webpack:///./src/components/components/moneyInput.config.vue?ef5f","webpack:///./src/components/components/moneyInput.config.vue","webpack:///./src/components/components/moneyInput.config.vue?3640"],"names":["__webpack_require__","defined","SEARCH","$search","regexp","O","this","fn","undefined","call","RegExp","String","chineseNumber","dValue","maxDec","toString","replace","isNaN","minus","CN_SYMBOL","length","indexOf","resAIW","parts","digits","radices","bigRadices","decimals","zeroCount","i","p","d","quotient","modulus","vInt","vDec","NoneDecLen","Number","split","rDec","Math","pow","round","abs","aIntDec","substr","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","label-width","_l","item","index","key","code","cType","label","name","type","model","value","configData","callback","$$v","$set","expression","_e","staticStyle","margin-top","span","sourceType","on","on-change","convertChange","convertDefaultVal","input","inputChange","directives","rawName","_v","_s","moneyPreview","staticRenderFns","moneyInput_configvue_type_script_lang_js_","components","Editor","editor","props","require","configs","Array","watch","currentValue","newValue","oldValue","$emit","data","uuid","valueN","valueDefaultVal","convertN","moneyText","moneyValue","refuseCharacotr","unit","weightMap","1000","10000","100000000","created","n","deepCopy","JSON","parse","methods","console","log","formatInput","calInputValue","$1","idx","search","slice","sText","num","numStr","unitStr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","getWeight","err","return","numValue","Object","util","charactor","val","components_moneyInput_configvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_moneyInput_config_vue_vue_type_style_index_0_id_d6ce0d88_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_moneyInput_config_vue_vue_type_style_index_0_id_d6ce0d88_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-242ef0c8.8709a1a4.js","sourcesContent":["// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search) {\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n","/*\n    工具包\n*/\nexport function chineseNumber (dValue) {\n  var maxDec = 2\n  // 验证输入金额数值或数值字符串：\n  dValue = dValue.toString().replace(/,/g, '')\n  dValue = dValue.replace(/^0+/, '') // 金额数值转字符、移除逗号、移除前导零\n  if (dValue === '') {\n    return '零元整'\n  } else if (isNaN(dValue)) {\n    return '错误：金额不是合法的数值！'\n  }\n  var minus = '' // 负数的符号“-”的大写：“负”字。可自定义字符，如“（负）”。\n  var CN_SYMBOL = '' // 币种名称（如“人民币”，默认空）\n  if (dValue.length > 1) {\n    if (dValue.indexOf('-') === 0) {\n      dValue = dValue.replace('-', '')\n      minus = '负'\n    } // 处理负数符号“-”\n    if (dValue.indexOf('+') === 0) {\n      dValue = dValue.replace('+', '')\n    } // 处理前导正数符号“+”（无实际意义）\n  }\n  var vInt = ''\n  var vDec = '' // 字符串：金额的整数部分、小数部分\n  var resAIW // 字符串：要输出的结果\n  var parts // 数组（整数部分.小数部分），length=1时则仅为整数。\n  var digits, radices, bigRadices, decimals // 数组：数字（0~9——零~玖）；基（十进制记数系统中每个数字位的基是10——拾,佰,仟）；大基（万,亿,兆,京,垓,杼,穰,沟,涧,正）；辅币（元以下，角/分/厘/毫/丝）。\n  var zeroCount // 零计数\n  var i, p, d // 循环因子；前一位数字；当前位数字。\n  var quotient, modulus // 整数部分计算用：商数、模数。\n  // 金额数值转换为字符，分割整数部分和小数部分：整数、小数分开来搞（小数部分有可能四舍五入后对整数部分有进位）。\n  var NoneDecLen = (typeof (maxDec) === 'undefined' || maxDec == null || Number(maxDec) < 0 || Number(maxDec) > 5) // 是否未指定有效小数位（true/false）\n  parts = dValue.split('.') // 数组赋值：（整数部分.小数部分），Array的length=1则仅为整数。\n  if (parts.length > 1) {\n    vInt = parts[0]\n    vDec = parts[1] // 变量赋值：金额的整数部分、小数部分\n    if (NoneDecLen) {\n      maxDec = vDec.length > 5 ? 5 : vDec.length\n    } // 未指定有效小数位参数值时，自动取实际小数位长但不超5。\n    var rDec = Number('0.' + vDec)\n    rDec *= Math.pow(10, maxDec)\n    rDec = Math.round(Math.abs(rDec))\n    rDec /= Math.pow(10, maxDec) // 小数四舍五入\n    var aIntDec = rDec.toString().split('.')\n    if (Number(aIntDec[0]) === 1) {\n      vInt = (Number(vInt) + 1).toString()\n    } // 小数部分四舍五入后有可能向整数部分的个位进位（值1）\n    if (aIntDec.length > 1) {\n      vDec = aIntDec[1]\n    } else {\n      vDec = ''\n    }\n  } else {\n    vInt = dValue\n    vDec = ''\n    if (NoneDecLen) {\n      maxDec = 0\n    }\n  }\n  if (vInt.length > 44) {\n    return '错误：金额值太大了！整数位长【' + vInt.length.toString() + '】超过了上限——44位/千正/10^43（注：1正=1万涧=1亿亿亿亿亿，10^40）！'\n  }\n  // 准备各字符数组 Prepare the characters corresponding to the digits:\n  digits = ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'] // 零~玖\n  radices = ['', '拾', '佰', '仟'] // 拾,佰,仟\n  bigRadices = ['', '万', '亿', '兆', '京', '垓', '杼', '穰', '沟', '涧', '正'] // 万,亿,兆,京,垓,杼,穰,沟,涧,正\n  decimals = ['角', '分', '厘', '毫', '丝'] // 角/分/厘/毫/丝\n  resAIW = '' // 开始处理\n  // 处理整数部分（如果有）\n  if (Number(vInt) > 0) {\n    zeroCount = 0\n    for (i = 0; i < vInt.length; i++) {\n      p = vInt.length - i - 1\n      d = vInt.substr(i, 1)\n      quotient = p / 4\n      modulus = p % 4\n      if (d === '0') {\n        zeroCount++\n      } else {\n        if (zeroCount > 0) {\n          resAIW += digits[0]\n        }\n        zeroCount = 0\n        resAIW += digits[Number(d)] + radices[modulus]\n      }\n      if (modulus === 0 && zeroCount < 4) {\n        resAIW += bigRadices[quotient]\n      }\n    }\n    resAIW += '元'\n  }\n  // 处理小数部分（如果有）\n  for (i = 0; i < vDec.length; i++) {\n    d = vDec.substr(i, 1)\n    if (d !== '0') {\n      resAIW += digits[Number(d)] + decimals[i]\n    }\n  }\n  // 处理结果\n  if (resAIW === '') {\n    resAIW = '零' + '元'\n  } // 零元\n  if (vDec === '') {\n    resAIW += '整'\n  } // 元整\n  resAIW = CN_SYMBOL + minus + resAIW // 人民币/负元角分/整\n  return resAIW\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"money-input-config\"},[_c('Form',{attrs:{\"label-width\":200}},_vm._l((_vm.currentValue),function(item,index){return _c('div',{key:index,staticClass:\"config\"},[(item.code === 'alias' && _vm.cType !== 1)?_c('Form-item',{attrs:{\"label\":item.name}},[_c('Input',{attrs:{\"type\":\"text\"},model:{value:(item.configData.configData),callback:function ($$v) {_vm.$set(item.configData, \"configData\", $$v)},expression:\"item.configData.configData\"}})],1):_vm._e(),(item.code === 'maxLength')?_c('Form-item',{attrs:{\"label\":item.name}},[_c('Input',{attrs:{\"type\":\"text\"},model:{value:(item.configData.configData),callback:function ($$v) {_vm.$set(item.configData, \"configData\", $$v)},expression:\"item.configData.configData\"}}),_c('Row',{staticStyle:{\"margin-top\":\"10px\"}},[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Editor',{attrs:{\"sourceType\":2},model:{value:(item.configData.otherConfig),callback:function ($$v) {_vm.$set(item.configData, \"otherConfig\", $$v)},expression:\"item.configData.otherConfig\"}})],1)],1)],1):_vm._e(),(item.code === 'minLength')?_c('Form-item',{attrs:{\"label\":item.name}},[_c('Input',{attrs:{\"type\":\"text\"},model:{value:(item.configData.configData),callback:function ($$v) {_vm.$set(item.configData, \"configData\", $$v)},expression:\"item.configData.configData\"}}),_c('Row',{staticStyle:{\"margin-top\":\"10px\"}},[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Editor',{attrs:{\"sourceType\":2},model:{value:(item.configData.otherConfig),callback:function ($$v) {_vm.$set(item.configData, \"otherConfig\", $$v)},expression:\"item.configData.otherConfig\"}})],1)],1)],1):_vm._e(),(item.code === 'convert')?_c('Form-item',{attrs:{\"label\":item.name}},[_c('i-switch',{on:{\"on-change\":_vm.convertChange},model:{value:(_vm.convertDefaultVal),callback:function ($$v) {_vm.convertDefaultVal=$$v},expression:\"convertDefaultVal\"}})],1):_vm._e(),(item.code === 'value')?_c('Form-item',{attrs:{\"label\":item.name}},[_c('Input',{attrs:{\"type\":\"text\"},on:{\"input\":_vm.inputChange},model:{value:(item.configData.configData),callback:function ($$v) {_vm.$set(item.configData, \"configData\", $$v)},expression:\"item.configData.configData\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.convertDefaultVal),expression:\"convertDefaultVal\"}],staticClass:\"preview\"},[_vm._v(_vm._s(_vm.moneyPreview))]),_c('Row',{staticStyle:{\"margin-top\":\"10px\"}},[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Editor',{attrs:{\"sourceType\":2},model:{value:(item.configData.otherConfig),callback:function ($$v) {_vm.$set(item.configData, \"otherConfig\", $$v)},expression:\"item.configData.otherConfig\"}})],1)],1)],1):_vm._e()],1)}))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"money-input-config\">\n    <Form :label-width=\"200\">\n      <div class=\"config\"\n           v-for=\"(item, index) in currentValue\" :key=\"index\">\n        <!-- 别名 -->\n        <Form-item :label=\"item.name\"\n                   v-if=\"item.code === 'alias' && cType !== 1\">\n          <Input type=\"text\" v-model=\"item.configData.configData\"></Input>\n        </Form-item>\n        <!-- 最大值 -->\n        <Form-item :label=\"item.name\"\n                   v-if=\"item.code === 'maxLength'\">\n          <Input type=\"text\"\n              v-model=\"item.configData.configData\"></Input>\n          <!-- {{ item.configData }} -->\n          <Row style=\"margin-top: 10px\">\n            <Col span=\"24\">\n            <Editor v-model=\"item.configData.otherConfig\" :sourceType=\"2\"/>\n            </Col>\n          </Row>\n        </Form-item>\n        <!-- 最小值 -->\n        <Form-item :label=\"item.name\"\n                   v-if=\"item.code === 'minLength'\">\n          <Input type=\"text\"\n              v-model=\"item.configData.configData\"></Input>\n          <!-- {{ item.configData }} -->\n          <Row style=\"margin-top: 10px\">\n            <Col span=\"24\">\n            <Editor v-model=\"item.configData.otherConfig\" :sourceType=\"2\"/>\n            </Col>\n          </Row>\n        </Form-item>\n        <!-- 是否给用户显示中文转换结果 -->\n        <Form-item :label=\"item.name\"\n                   v-if=\"item.code === 'convert'\">\n          <i-switch v-model=\"convertDefaultVal\" @on-change=\"convertChange\"></i-switch>\n          <!-- {{ item.configData }} -->\n        </Form-item>\n        <!-- 默认值 -->\n        <Form-item :label=\"item.name\"\n                   v-if=\"item.code === 'value'\">\n          <Input type=\"text\"\n              v-model=\"item.configData.configData\" @input=\"inputChange\"></Input>\n          <div class=\"preview\" v-show=\"convertDefaultVal\">{{ moneyPreview }}</div>\n          <!-- {{ item.configData }} -->\n          <Row style=\"margin-top: 10px\">\n            <Col span=\"24\">\n            <Editor v-model=\"item.configData.otherConfig\" :sourceType=\"2\"/>\n            </Col>\n          </Row>\n        </Form-item>\n      </div>\n    </Form>\n  </div>\n</template>\n\n<script>\nimport { chineseNumber } from './util'\nimport Editor from '@/components/editor'\n\nexport default {\n  name: 'money-input-config',\n  components: {\n    Editor\n  },\n  props: {\n    cType: {\n      type: Number,\n      require: true\n    },\n    configs: {\n      type: Array,\n      require: true\n    }\n  },\n  watch: {\n    currentValue (newValue, oldValue) {\n      this.$emit('input', {\n        value: this.currentValue\n      })\n    }\n  },\n  data () {\n    return {\n      // uuid和currentValue是必须的，并且在第1、2位置\n      uuid: '00000000-0000-0000-0000-000000000003',\n      currentValue: '',\n      valueN: null,\n      valueDefaultVal: null,\n      convertN: null,\n      convertDefaultVal: null,\n      moneyText: '',\n      moneyValue: '',\n      moneyPreview: '',\n      refuseCharacotr: /[^0-9０１２３４５６７８９千万亿,.]/g,\n      unit: /([千万亿])/g,\n      weightMap: {\n        1000: /千/,\n        10000: /万/,\n        100000000: /亿/\n      }\n    }\n  },\n  created () {\n    this.currentValue = this.deepCopy(this.configs)\n    for (const n in this.currentValue) {\n      if (this.currentValue[n].code === 'value') {\n        this.valueN = n\n        this.valueDefaultVal = this.currentValue[n].configData.configData\n      } else if (this.currentValue[n].code === 'convert') {\n        this.convertN = n\n        this.convertDefaultVal = JSON.parse(this.currentValue[n].configData.configData)\n        // this.currentValue[n].configData.configData = JSON.parse(this.currentValue[n].configData.configData)\n      }\n    }\n  },\n  methods: {\n    inputChange (value) {\n      console.log(value)\n      this.formatInput(value)\n      this.calInputValue(value)\n    },\n    formatInput (value) {\n      value = value.replace(this.refuseCharacotr, '')\n      value = value.replace(',', '')\n      value = value.replace(/[０１２３４５６７８９]/g, function ($1) {\n        return '０１２３４５６７８９'.indexOf($1)\n      })\n      let idx = value.search(this.unit)\n      if (idx !== -1) {\n        for (; idx < value.length; idx++) {\n          if (value[idx].search(this.unit)) {\n            break\n          }\n        }\n        value = value.slice(0, idx)\n      }\n      idx = value.search(/[^0-9]/)\n      if (idx === -1) {\n        idx = value.length\n      }\n      // for (let index = idx - 3; index > 0; index -= 3) {\n      //   value = value.slice(0, index) + ',' + value.slice(index)\n      // }\n    },\n    calInputValue (value) {\n      let sText = value.replace(/[,，]/g, '')\n      let num = 0\n      let numStr = ''\n      let unitStr = ''\n      let idx = -1\n      for (let index in sText) {\n        if (isNaN(sText[index]) && sText[index] !== '.') {\n          idx = index\n          break\n        }\n      }\n      if (idx !== -1) {\n        numStr = sText.slice(0, idx)\n        unitStr = sText.slice(idx)\n        num = Number(numStr)\n        for (let unit of unitStr) {\n          console.log(this.getWeight(unit))\n          num *= this.getWeight(unit)\n        }\n      } else {\n        num = Number(sText)\n      }\n      this.numValue = num\n      this.moneyPreview = chineseNumber(num)\n      return this.numValue\n    },\n    getWeight (charactor) {\n      for (const key in this.weightMap) {\n        if (charactor.search(this.weightMap[key]) !== -1) {\n          return Number(key)\n        }\n      }\n      return 0\n    },\n    convertChange (val) {\n      this.currentValue[this.convertN].configData.configData = val.toString()\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./moneyInput.config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./moneyInput.config.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./moneyInput.config.vue?vue&type=template&id=d6ce0d88&scoped=true&\"\nimport script from \"./moneyInput.config.vue?vue&type=script&lang=js&\"\nexport * from \"./moneyInput.config.vue?vue&type=script&lang=js&\"\nimport style0 from \"./moneyInput.config.vue?vue&type=style&index=0&id=d6ce0d88&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d6ce0d88\",\n  null\n  \n)\n\ncomponent.options.__file = \"moneyInput.config.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./moneyInput.config.vue?vue&type=style&index=0&id=d6ce0d88&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./moneyInput.config.vue?vue&type=style&index=0&id=d6ce0d88&lang=stylus&scoped=true&\""],"sourceRoot":""}