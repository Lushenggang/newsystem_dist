{"version":3,"sources":["webpack:///./src/components/components/upload.vue?f1dc","webpack:///src/components/components/upload.vue","webpack:///./src/components/components/upload.vue?4aa0","webpack:///./src/components/components/upload.vue","webpack:///./src/components/components/upload.vue?d1f7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","title","description","ref","attrs","type","componentType","name","paste","multiple","show-upload-list","showUploadList","on-format-error","handleFormatError","on-exceeded-size","handleMaxSize","before-upload","handleBeforeUpload","on-success","handleSuccess","max-size","maxSize","data","theKey","default-file-list","defaultFileList","action","BASE_URL","staticStyle","padding","color","size","staticRenderFns","uploadvue_type_script_lang_js_","props","schemaKey","String","require","default","placeholder","value","additionalKeys","Array","validate","Boolean","readonly","readonlyData","accept","format","Number","server","uuid","currentValue","config","key","theFormat","mounted","split","tmp","url","tmp2","n","push","change","methods","_change","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","first","wrap","_context","prev","next","map","$emit","stop","_x","apply","arguments","res","file","console","log","$refs","upload","fileList","response","$Notice","warning","desc","check","length","components_uploadvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_upload_vue_vue_type_style_index_0_id_9dbdf416_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_upload_vue_vue_type_style_index_0_id_9dbdf416_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-04d27219.13c88d2d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blank\"},[_c('div',{staticClass:\"question\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"description\"},[_vm._v(_vm._s(_vm.description))]),_c('Upload',{ref:\"upload\",attrs:{\"type\":_vm.componentType,\"name\":\"file\",\"paste\":_vm.paste,\"multiple\":_vm.multiple,\"show-upload-list\":_vm.showUploadList,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"on-success\":_vm.handleSuccess,\"max-size\":_vm.maxSize,\"data\":_vm.theKey,\"default-file-list\":_vm.defaultFileList,\"action\":_vm.BASE_URL + '/mvp-front/file/upload'}},[_c('div',{staticStyle:{\"padding\":\"20px 0\"}},[_c('Icon',{staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_c('p',[_vm._v(\"单击或者拖动到此处上传\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"blank\">\r\n    <div class=\"question\">{{ title }}</div>\r\n    <div class=\"description\">{{ description }}</div>\r\n    <Upload :type=\"componentType\"\r\n            ref=\"upload\"\r\n            name=\"file\"\r\n            :paste=\"paste\"\r\n            :multiple=\"multiple\"\r\n            :show-upload-list=\"showUploadList\"\r\n            :on-format-error=\"handleFormatError\"\r\n            :on-exceeded-size=\"handleMaxSize\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :on-success=\"handleSuccess\"\r\n            :max-size=\"maxSize\"\r\n            :data=\"theKey\"\r\n            :default-file-list=\"defaultFileList\"\r\n            :action=\"BASE_URL + '/mvp-front/file/upload'\">\r\n      <div style=\"padding: 20px 0\">\r\n        <Icon type=\"ios-cloud-upload\"\r\n              size=\"52\"\r\n              style=\"color: #3399ff\"></Icon>\r\n        <p>单击或者拖动到此处上传</p>\r\n      </div>\r\n    </Upload>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { BASE_URL } from '@/libs/config'\r\n\r\nexport default {\r\n  name: 'upload',\r\n  props: {\r\n    schemaKey: {\r\n      type: String,\r\n      require: true\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    description: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    additionalKeys: {\r\n      type: Array\r\n    },\r\n    validate: {\r\n      type: Boolean\r\n    },\r\n    readonly: {\r\n      type: Boolean\r\n    },\r\n    readonlyData: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    componentType: {\r\n      type: String\r\n    },\r\n    accept: {\r\n      type: String\r\n    },\r\n    format: {\r\n      type: String\r\n    },\r\n    maxSize: {\r\n      type: Number\r\n    },\r\n    multiple: {\r\n      type: Boolean\r\n    },\r\n    paste: {\r\n      type: Boolean\r\n    },\r\n    showUploadList: {\r\n      type: Boolean\r\n    },\r\n    defaultFileList: {\r\n      type: Array\r\n    },\r\n    server: {\r\n      type: Boolean,\r\n      require: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      uuid: '00000000-0000-0000-0000-000000000018',\r\n      currentValue: '',\r\n      BASE_URL,\r\n      theKey: {\r\n        key: null\r\n      },\r\n      theFormat: null\r\n    }\r\n  },\r\n  mounted () {\r\n    this.theFormat = this.format.split(',')\r\n    this.theKey.key = this.schemaKey\r\n    const tmp = {\r\n      name: '',\r\n      url: ''\r\n    }\r\n    const tmp2 = []\r\n    for (const n in this.value) {\r\n      tmp.url = BASE_URL + '/mvp-front/file/download/' + this.value[n]\r\n      tmp2.push(tmp)\r\n    }\r\n    this.currentValue = tmp2\r\n    this.change(true)\r\n  },\r\n  methods: {\r\n    async change (first) {\r\n      const tmp = []\r\n      this.currentValue.map(n => {\r\n        tmp.push(n.url)\r\n      })\r\n      this.$emit('input', {\r\n        schemaKey: this.schemaKey,\r\n        value: tmp,\r\n        server: this.server,\r\n        first\r\n      })\r\n    },\r\n    handleSuccess (res, file) {\r\n      console.log(this.$refs.upload.fileList)\r\n      const tmp = {\r\n        name: '',\r\n        url: ''\r\n      }\r\n      const tmp2 = []\r\n      for (const n in this.$refs.upload.fileList) {\r\n        tmp.url = BASE_URL + '/mvp-front/file/download/' + this.$refs.upload.fileList[n].response.data\r\n        tmp2.push(tmp)\r\n      }\r\n      this.currentValue = tmp2\r\n      this.change()\r\n    },\r\n    handleFormatError (file) {\r\n      this.$Notice.warning({\r\n        title: '文件格式不被支持',\r\n        desc: file.name + ' 的文件格式不被支持。仅支持格式符合 ' + this.accept + ' 且 ' + this.format.split(',') + ' 为后缀的文件。'\r\n      })\r\n    },\r\n    handleMaxSize (file) {\r\n      this.$Notice.warning({\r\n        title: '大小超过限制',\r\n        desc: file.name + ' 文件太大了，最大支持' + this.maxSize + 'kb的文件上传、'\r\n      })\r\n    },\r\n    handleBeforeUpload () {\r\n      const check = this.$refs.upload.fileList.length < 20\r\n      if (!check) {\r\n        this.$Notice.warning({\r\n          title: '每次最多上传20个文件。'\r\n        })\r\n      }\r\n      return check\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.blank\r\n  padding 0.1rem\r\n  margin auto\r\n  display flex\r\n  flex-direction column\r\n  font-size 1rem\r\n\r\n  .question\r\n    margin 0.1rem 0\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=9dbdf416&scoped=true&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&id=9dbdf416&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9dbdf416\",\n  null\n  \n)\n\ncomponent.options.__file = \"upload.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&id=9dbdf416&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&id=9dbdf416&lang=stylus&scoped=true&\""],"sourceRoot":""}