{"version":3,"sources":["webpack:///./src/components/professional-selector/professional-selector.vue?eb49","webpack:///./src/components/professional-selector/professional-selector.vue?0ddd","webpack:///src/components/professional-selector/professional-selector.vue","webpack:///./src/components/professional-selector/professional-selector.vue?d3de","webpack:///./src/components/professional-selector/professional-selector.vue","webpack:///./src/components/professional-selector/index.js","webpack:///./src/knowledge/Tag.vue?c8b0","webpack:///./src/knowledge/Tag.vue?a808","webpack:///src/knowledge/Tag.vue","webpack:///./src/knowledge/Tag.vue?3a2a","webpack:///./src/knowledge/Tag.vue","webpack:///./src/knowledge/Tag.vue?dc69"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_professional_selector_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_professional_selector_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","data","professionalData","change-on-select","on","on-change","select","model","value","callback","$$v","selected","expression","staticRenderFns","professional_selectorvue_type_script_lang_js_","name","props","professionalId","type","Number","String","required","professionalMap","Map","created","getProfessionalList","watch","makeSelected","computed","methods","_this","Object","professional","then","resp","response","success","makeData","$Message","error","msg","catch","err","console","$emit","length","list","rootLevel","subLevel","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","id","label","set","parentId","push","return","_i","_item","parentNode","get","children","size","lastNode","currentNode","splice","professional_selector_professional_selectorvue_type_script_lang_js_","component","componentNormalizer","options","__file","professional_selector","professionalSelector","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tag_vue_vue_type_style_index_0_id_21f43293_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tag_vue_vue_type_style_index_0_id_21f43293_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default","staticClass","nativeOn","click","$event","addTag","_v","tagData","load-data","loadData","tagRender","mask-closable","loading","on-ok","saveTag","editTagModal","slot","currentTag","label-width","$set","on-select","selectProfessional","tagModel","level","indexKey","alias","sort","Tagvue_type_script_lang_js_","components","tagSelector","tag_selector","deepCopy","currentParentTag","getTagList","api_tag","h","_ref","_this2","node","root","color","style","marginRight","icon","editTag","deleteTag","_this3","info","arguments","pro","_this4","expand","log","tag","_this5","$Modal","confirm","title","content","onCancel","onOk","ids","selectParentTag","knowledge_Tagvue_type_script_lang_js_","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tag_vue_vue_type_style_index_1_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tag_vue_vue_type_style_index_1_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-3ef53498.4abe4af7.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./professional-selector.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./professional-selector.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Cascader',{attrs:{\"data\":_vm.professionalData,\"change-on-select\":\"\"},on:{\"on-change\":_vm.select},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Cascader\n    :data=\"professionalData\"\n    change-on-select\n    v-model=\"selected\"\n    @on-change=\"select\" />\n</template>\n\n<script>\nimport { getProfessionalList } from '@/api/professional'\n\nexport default {\n  name: 'professional-selector',\n  props: {\n    professionalId: {\n      type: Number | String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      selected: [],\n      professionalData: [],\n      professionalMap: new Map()\n    }\n  },\n  created () {\n    this.getProfessionalList()\n  },\n  watch: {\n    professionalId () {\n      this.makeSelected()\n    }\n  },\n  computed: {\n  },\n  methods: {\n    getProfessionalList () {\n      getProfessionalList({}).then(resp => {\n        if (resp.response.success) {\n          this.professionalData = this.makeData(resp.data)\n\n          this.makeSelected()\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      }).catch(err => {\n        console.error(err)\n      })\n    },\n    select (value, data) {\n      this.$emit('on-select', data[data.length - 1])\n    },\n    makeData (list) {\n      const rootLevel = []\n      const subLevel = []\n      // 生成map，分拣出根级数据和子集\n      for (let item of list) {\n        item.value = item.id\n        item.label = item.name\n\n        this.professionalMap.set(item.id, item)\n        if (!item.parentId) {\n          rootLevel.push(item)\n        } else {\n          subLevel.push(item)\n        }\n      }\n\n      // 将子集数据放入父级节点的chidren中\n      for (let item of subLevel) {\n        const parentNode = this.professionalMap.get(item.parentId)\n        if (!parentNode) {\n          return\n        }\n        if (parentNode.children) {\n          parentNode.children.push(item)\n        } else {\n          parentNode.children = [ item ]\n        }\n      }\n\n      return rootLevel\n    },\n    makeSelected () {\n      if (!this.professionalId || !this.professionalMap.size) {\n        return\n      }\n      this.selected = [ this.professionalId ]\n      const lastNode = this.professionalMap.get(this.professionalId)\n      let currentNode = lastNode ? this.professionalMap.get(lastNode.parentId) : null\n      while (currentNode) {\n        this.selected.splice(0, 0, currentNode.id)\n        currentNode = this.professionalMap.get(currentNode.parentId)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./professional-selector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./professional-selector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./professional-selector.vue?vue&type=template&id=8ee461de&\"\nimport script from \"./professional-selector.vue?vue&type=script&lang=js&\"\nexport * from \"./professional-selector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./professional-selector.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"professional-selector.vue\"\nexport default component.exports","import professionalSelector from './professional-selector'\nexport default professionalSelector\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=style&index=0&id=21f43293&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=style&index=0&id=21f43293&scoped=true&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticClass:\"tag-page\"},[_c('Row',{staticClass:\"tool-bar\"},[_c('Button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.addTag()}}},[_vm._v(\"添加标签\")])],1),_c('Row',{staticClass:\"tag-list\"},[_c('Tree',{attrs:{\"data\":_vm.tagData,\"load-data\":_vm.loadData,\"render\":_vm.tagRender}})],1),_c('Modal',{attrs:{\"mask-closable\":false,\"loading\":true},on:{\"on-ok\":_vm.saveTag},model:{value:(_vm.editTagModal),callback:function ($$v) {_vm.editTagModal=$$v},expression:\"editTagModal\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"\\n      编辑标签\\n    \")]),_c('div',{staticClass:\"add-tag-panel\"},[_c('Form',{attrs:{\"model\":_vm.currentTag,\"label-width\":60}},[_c('FormItem',{attrs:{\"label\":\"标签名称\"}},[_c('Input',{model:{value:(_vm.currentTag.name),callback:function ($$v) {_vm.$set(_vm.currentTag, \"name\", $$v)},expression:\"currentTag.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"对应专业\"}},[_c('professionalSelector',{attrs:{\"professionalId\":_vm.currentTag.professionalId},on:{\"on-select\":_vm.selectProfessional}})],1),_c('FormItem',{attrs:{\"label\":\"分值\"}},[_c('Input')],1),_c('FormItem',{attrs:{\"label\":\"标签别名\"}},[_c('Input',{model:{value:(_vm.currentTag.alias),callback:function ($$v) {_vm.$set(_vm.currentTag, \"alias\", $$v)},expression:\"currentTag.alias\"}})],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Layout class=\"tag-page\">\n    <Row class=\"tool-bar\">\n      <Button type=\"primary\" @click.native=\"addTag()\">添加标签</Button>\n    </Row>\n    <Row class=\"tag-list\">\n      <Tree :data=\"tagData\" :load-data=\"loadData\" :render=\"tagRender\"></Tree>\n    </Row>\n\n    <Modal\n      :mask-closable=\"false\"\n      v-model=\"editTagModal\"\n      @on-ok=\"saveTag\"\n      :loading=\"true\"\n      >\n      <div slot=\"header\">\n        编辑标签\n      </div>\n      <div class=\"add-tag-panel\">\n        <Form :model=\"currentTag\" :label-width=\"60\">\n          <!-- <FormItem label=\"上级标签\">\n            <tagSelector @on-select=\"selectParentTag\"/>\n          </FormItem> -->\n          <FormItem label=\"标签名称\">\n            <Input v-model=\"currentTag.name\" />\n          </FormItem>\n          <FormItem label=\"对应专业\">\n            <professionalSelector :professionalId=\"currentTag.professionalId\" @on-select=\"selectProfessional\" />\n          </FormItem>\n          <FormItem label=\"分值\">\n            <Input />\n          </FormItem>\n          <FormItem label=\"标签别名\">\n            <Input v-model=\"currentTag.alias\"/>\n          </FormItem>\n        </Form>\n      </div>\n    </Modal>\n  </Layout>\n</template>\n\n<script>\nimport { getTagList, saveTag, deleteTag } from '@/api/tag'\nimport professionalSelector from '@/components/professional-selector'\nimport tagSelector from '@/components/tag-selector'\n\nconst tagModel = {\n  name: '',\n  level: '',\n  indexKey: '',\n  alias: '',\n  professionalId: 0,\n  sort: 0,\n  parentId: null\n}\n\nexport default {\n  name: 'tag',\n  components: {\n    professionalSelector,\n    tagSelector\n  },\n  data () {\n    return {\n      editTagModal: false,\n      tagData: [],\n      currentTag: this.deepCopy(tagModel),\n      currentParentTag: null\n    }\n  },\n  created () {\n    this.getTagList()\n  },\n  methods: {\n    getTagList () {\n      getTagList({ parentId: null }).then(resp => {\n        if (resp.response.success) {\n          this.tagData = resp.data\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      }).catch(err => {\n        console.error(err)\n      })\n    },\n    tagRender (h, { root, node, data }) {\n      return h(\n        'span',\n        [\n          h(\n            'Tag',\n            {\n              props: {\n                color: 'success'\n              },\n              style: {\n                marginRight: '0.5rem'\n              }\n            },\n            data.name\n          ),\n          h(\n            'Button',\n            {\n              props: {\n                type: 'primary',\n                size: 'small',\n                icon: 'md-add'\n              },\n              style: {\n                marginRight: '0.2rem'\n              },\n              on: {\n                click: () => {\n                  this.addTag(node)\n                }\n              }\n            }\n          ),\n          h(\n            'Button',\n            {\n              props: {\n                type: 'primary',\n                size: 'small',\n                icon: 'md-create'\n              },\n              style: {\n                marginRight: '0.2rem'\n              },\n              on: {\n                click: () => {\n                  this.editTag(node)\n                }\n              }\n            }\n          ),\n          h(\n            'Button',\n            {\n              props: {\n                type: 'error',\n                size: 'small',\n                icon: 'md-trash'\n              },\n              on: {\n                click: () => {\n                  this.deleteTag(data)\n                }\n              }\n            }\n          )\n        ]\n      )\n    },\n    loadData (item, callback) {\n      getTagList({ parentId: item.id }).then(resp => {\n        if (resp.response.success) {\n          if (resp.data.length === 0) {\n            this.$Message.info('没有更多标签！')\n          }\n          callback(resp.data)\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      }).catch(err => {\n        console.error(err)\n      })\n    },\n    addTag (node = null) {\n      if (node) {\n        this.currentTag.parentId = node.node.id\n        this.currentParentTag = node\n      }\n      this.editTagModal = true\n    },\n    editTag (node) {\n      this.currentTag = node.node\n      this.editTagModal = true\n    },\n    selectProfessional (pro) {\n      this.currentTag.professionalId = pro.id\n    },\n    saveTag () {\n      saveTag(this.currentTag).then(resp => {\n        if (resp.response.success) {\n          this.$Message.success('保存成功！')\n          if (this.currentParentTag && resp.data.parentId) {\n            if (this.currentParentTag.node.expand) {\n              this.currentParentTag.node.children.push(resp.data)\n            }\n          } else {\n            this.tagData.push(resp.data)\n          }\n          this.editTagModal = false\n          this.currentParentTag = null\n          this.currentTag = this.deepCopy(tagModel)\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    deleteTag (tag) {\n      this.$Modal.confirm({\n        title: '提示',\n        content: '将要删除所选标签及其所有下级标签，该操作不可撤销，请确定是否删除？',\n        onCancel: () => {},\n        onOk: () => {\n          deleteTag({ ids: [tag.id] }).then(resp => {\n            if (resp.response.success) {\n              this.$Message.success('删除成功！')\n              this.getTagList()\n            }\n          })\n        }\n      })\n    },\n    selectParentTag (data) {\n      console.log(data)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.tag-page\n  height 100%\n  background none\n  padding 0.5rem\n  .tool-bar\n    margin-bottom 0.5rem\n  .tag-list\n    flex 1 1 auto\n    height 100%\n    margin-bottom 0.5rem\n    overflow hidden\n    .tag-table\n      height 100%\n      flex 1 1 auto\n      overflow hidden\n</style>\n\n<style lang=\"stylus\">\n.tag-table\n  >.ivu-table\n    display flex\n    flex-direction column\n    .ivu-table-header\n      flex 0 0 auto\n    .ivu-table-body\n      flex 1 1 auto\n.edit-modal-wrap\n  padding 0 3rem\n  .ivu-modal\n    width 100%!important\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tag.vue?vue&type=template&id=21f43293&scoped=true&\"\nimport script from \"./Tag.vue?vue&type=script&lang=js&\"\nexport * from \"./Tag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tag.vue?vue&type=style&index=0&id=21f43293&scoped=true&lang=stylus&\"\nimport style1 from \"./Tag.vue?vue&type=style&index=1&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21f43293\",\n  null\n  \n)\n\ncomponent.options.__file = \"Tag.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=style&index=1&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=style&index=1&lang=stylus&\""],"sourceRoot":""}