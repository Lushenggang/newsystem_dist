(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72ac519a"],{"0b54":function(t,a,e){"use strict";var l=e("72a5"),s=e.n(l);s.a},"72a5":function(t,a,e){},e272:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Layout",{staticClass:"law-list"},[e("Table",{attrs:{"highlight-row":"",columns:t.lawItemListColumns,data:t.lawItemList}}),e("Modal",{attrs:{"mask-closable":!1,title:"编辑章节",loading:!0},on:{"on-cancel":t.closeModal,"on-ok":t.saveChapter},model:{value:t.addLawChapterModal,callback:function(a){t.addLawChapterModal=a},expression:"addLawChapterModal"}},[e("Form",{attrs:{model:t.lawChapterData}},[e("FormItem",{attrs:{label:"名称"}},[e("Input",{model:{value:t.lawChapterData.title,callback:function(a){t.$set(t.lawChapterData,"title",a)},expression:"lawChapterData.title"}})],1)],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:"编辑法条",loading:!0},on:{"on-cancel":t.closeModal},model:{value:t.addLawItemModal,callback:function(a){t.addLawItemModal=a},expression:"addLawItemModal"}},[e("Form",{attrs:{model:t.lawItemData}},[e("FormItem",{attrs:{label:"标题"}},[e("Input",{attrs:{disabled:!t.editLawItemFlag},model:{value:t.lawItemData.title,callback:function(a){t.$set(t.lawItemData,"title",a)},expression:"lawItemData.title"}})],1),e("FormItem",{attrs:{label:"标签"}},[e("tagSelector",{attrs:{disabled:!t.editLawItemFlag},model:{value:t.lawItemData.tagInfo,callback:function(a){t.$set(t.lawItemData,"tagInfo",a)},expression:"lawItemData.tagInfo"}})],1),e("FormItem",{attrs:{label:"分值"}},[e("Input",{attrs:{disabled:!t.editLawItemFlag},model:{value:t.lawItemData.score,callback:function(a){t.$set(t.lawItemData,"score",a)},expression:"lawItemData.score"}})],1),e("FormItem",{attrs:{label:"排序"}},[e("Input",{attrs:{disabled:!t.editLawItemFlag},model:{value:t.lawItemData.sort,callback:function(a){t.$set(t.lawItemData,"sort",a)},expression:"lawItemData.sort"}})],1),e("FormItem",{attrs:{label:"内容"}},[e("Input",{attrs:{disabled:!t.editLawItemFlag,type:"textarea"},model:{value:t.lawItemData.content,callback:function(a){t.$set(t.lawItemData,"content",a)},expression:"lawItemData.content"}})],1)],1),e("Row",{staticStyle:{"align-item":"right"},attrs:{slot:"footer"},slot:"footer"},[t.editLawItemFlag?e("Button",{attrs:{type:"default"},nativeOn:{click:function(a){return t.closeModal(a)}}},[t._v("取消")]):t._e(),t.editLawItemFlag?e("Button",{attrs:{type:"primary"},nativeOn:{click:function(a){return t.saveLawItem(a)}}},[t._v("确定")]):t._e(),t.editLawItemFlag?t._e():e("Button",{attrs:{type:"primary"},nativeOn:{click:function(a){t.editLawItemFlag=!0}}},[t._v("编辑")])],1)],1)],1)},s=[],n=e("5189"),r=e("5d0b"),o={categoryId:null,content:"",documentLevel:0,id:null,keywords:"",lawId:null,level:0,parentId:null,score:0,sort:0,tagInfo:[],title:""},i={name:"law-list",components:{tagSelector:r["a"]},data:function(){var t=this;return{lawItemList:[],lawItemListColumns:[{type:"index",width:60,align:"center"},{title:"名称",render:function(a,e){e.column;var l=e.row;e.index;return a("a",{props:{href:"javascript: void(0)"},on:{click:function(){l.leaf?t.showLawItem(l):(t.$router.push({name:"LawItem",params:{lawId:t.$store.state.law.currentLaw.id,parentId:l.id}}),t.$store.commit("law/navPush",{title:l.title,path:{name:"LawItem",params:{lawId:t.$store.state.law.currentLaw.id,parentId:l.id}}}))}}},[a("span",l.leaf?"#":"@"),a("span",{style:{marginLeft:"0.2rem"}},l.title)])}},{title:"操作",render:function(a,e){e.column;var l=e.row,s=e.index;return a("span",[a("Button",{props:{type:"primary",size:"small"},nativeOn:{click:function(){console.log(l),t.editLawItem(l)}}},"编辑"),a("Button",{props:{type:"error",size:"small"},style:{marginLeft:"0.5rem"},nativeOn:{click:function(){t.deleteLawItem(l,s)}}},"删除")])}}],addLawChapterModal:!1,lawChapterData:this.deepCopy(o),addLawItemModal:!1,lawItemData:this.deepCopy(o),editLawItemFlag:!1}},created:function(){var t=this;this.getLawItemList(),this.$store.commit("law/setChapter",-1===this.$route.params.parentId?null:this.$route.params.parentId),this.$store.commit("law/subscribe",{name:"reload-law-item",handler:function(){t.getLawItemList(t.$route.params.lawId,t.$route.params.parentId)}})},beforeDestroy:function(){this.$store.commit("law/unSubscribe","reload-law-item")},watch:{"$route.params.parentId":{handler:function(){this.getLawItemList(),this.$store.commit("law/setChapter",-1===this.$route.params.parentId?null:this.$route.params.parentId)},deep:!0}},methods:{getLawItemList:function(){var t=this;Object(n["getLawItemList"])({lawId:this.$route.params.lawId,parentId:this.$route.params.parentId}).then(function(a){var e=a.data,l=a.response;l.success?t.lawItemList=e:t.$Message.error(l.msg)})},editLawItem:function(t){t.leaf?(this.lawItemData=t,this.addLawItemModal=!0,this.editLawItemFlag=!0):(this.lawChapterData=t,this.addLawChapterModal=!0)},addLawChapter:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addLawChapterModal=!0},saveChapter:function(){var t=this;this.lawChapterData.lawId=this.$store.state.law.currentLaw.id,this.lawChapterData.parentId=this.$store.state.law.currentChapter||null,this.lawChapterData.leaf=0,Object(n["saveLawItem"])(this.lawChapterData).then(function(a){a.data;var e=a.response;e.success&&(t.addLawChapterModal=!1,t.lawChapterData=t.deepCopy(o),t.getLawItemList())})},addLawItem:function(){this.addLawItemModal=!0,this.editLawItemFlag=!0},saveLawItem:function(){var t=this;this.lawItemData.lawId=this.$store.state.law.currentLaw.id,this.lawItemData.parentId=this.$store.state.law.currentChapter||null,this.lawItemData.leaf=1,Object(n["saveLawItem"])(this.lawItemData).then(function(a){a.data;var e=a.response;e.success&&(t.addLawItemModal=!1,t.lawItemData=t.deepCopy(o),t.getLawItemList())})},deleteLawItem:function(t,a){var e=this;this.$Modal.confirm({title:"提示",content:"删除后将无法恢复，请确定是否删除！",onCancel:function(){},onOk:function(){Object(n["deleteLawItem"])({id:t.id}).then(function(t){t.data;var l=t.response;l.success?(e.$Message.success("删除成功！"),e.lawItemList.splice(a,1)):e.$Message.error(l.msg)})}})},showLawItem:function(t){this.lawItemData=t,this.addLawItemModal=!0},closeModal:function(){this.addLawChapterModal=!1,this.addLawItemModal=!1,this.editLawItemFlag=!1}}},d=i,m=(e("0b54"),e("2877")),c=Object(m["a"])(d,l,s,!1,null,"56c4578e",null);c.options.__file="LawItemList.vue";a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-72ac519a.7bc4bba7.js.map