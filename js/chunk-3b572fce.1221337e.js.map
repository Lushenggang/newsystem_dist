{"version":3,"sources":["webpack:///./src/pages/BindPhone.vue?69ee","webpack:///./src/components/phone-login/phone-login.vue?b530","webpack:///src/components/phone-login/phone-login.vue","webpack:///./src/components/phone-login/phone-login.vue?1ec7","webpack:///./src/components/phone-login/phone-login.vue","webpack:///./src/components/phone-login/index.js","webpack:///./src/pages/BindPhone.vue?7e98","webpack:///src/pages/BindPhone.vue","webpack:///./src/pages/BindPhone.vue?e34f","webpack:///./src/pages/BindPhone.vue","webpack:///./src/components/phone-login/phone-login.vue?950a"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BindPhone_vue_vue_type_style_index_0_id_5263b7d6_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BindPhone_vue_vue_type_style_index_0_id_5263b7d6_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","model","userLoginInfo","rules","validators","label","label-width","prop","type","gutter","span","placeholder","value","callback","$$v","$set","expression","src","captchaUrl","on","click","refreshCaptcha","staticClass","loading","smsWait","sendSms","_v","_s","smsWaitTime","nativeOn","keyup","$event","_k","keyCode","key","handleLogin","staticRenderFns","phone_loginvue_type_script_lang_js_","name","data","settingInfo","captcha","smsCode","phone","loging","required","message","trigger","captchaUid","computed","currentNetworkType","set","networkType","get","created","getSettingInfo","console","log","$route","mounted","watch","beforeDestroy","methods","_getSettingInfo2","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","login","sent","t0","error","stop","apply","arguments","form","_this","$refs","validate","valid","loginRequest","usr","psw","_this2","loginParams","then","resp","response","success","$emit","EmitModel","event","vn","$vnode","params","token","userInfo","user","$Message","msg","catch","err","_sendSms","_callee2","validateResp","timer","_this3","_context2","replace","warning","abrupt","sms","uuid","setInterval","clearInterval","captchaUuid","_this4","concat","image","phone_login_phone_loginvue_type_script_lang_js_","component","componentNormalizer","options","__file","phone_login","phoneLogin","handleLoginSuccess","failed","handleLoginFailed","BindPhonevue_type_script_lang_js_","components","tmpUserInfo","deepCopy","$store","getters","unionid","commit","weixin","id","$router","pages_BindPhonevue_type_script_lang_js_","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_phone_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_phone_login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAwiBE,EAAG,8DCA3iB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,QAA4BE,IAAA,YAAAC,OAAuBC,MAAAR,EAAAS,cAAAC,MAAAV,EAAAW,cAAkDP,EAAA,YAAiBG,OAAOK,MAAA,MAAAC,cAAA,GAAAC,KAAA,aAAiDV,EAAA,OAAYG,OAAOQ,KAAA,OAAAC,OAAA,MAA2BZ,EAAA,OAAYG,OAAOU,KAAA,QAAab,EAAA,SAAcG,OAAOQ,KAAA,OAAAG,YAAA,gBAA2CV,OAAQW,MAAAnB,EAAAS,cAAA,QAAAW,SAAA,SAAAC,GAA2DrB,EAAAsB,KAAAtB,EAAAS,cAAA,UAAAY,IAA4CE,WAAA,4BAAqC,GAAAnB,EAAA,OAAgBG,OAAOU,KAAA,OAAYb,EAAA,OAAYG,OAAOiB,IAAAxB,EAAAyB,YAAqBC,IAAKC,MAAA3B,EAAA4B,qBAA4B,OAAAxB,EAAA,YAA2BG,OAAOK,MAAA,OAAAC,cAAA,GAAAC,KAAA,WAAgDV,EAAA,OAAYG,OAAOQ,KAAA,OAAAC,OAAA,MAA2BZ,EAAA,OAAYyB,YAAA,YAAAtB,OAA+BU,KAAA,QAAab,EAAA,SAAcG,OAAOQ,KAAA,OAAAG,YAAA,WAAsCV,OAAQW,MAAAnB,EAAAS,cAAA,MAAAW,SAAA,SAAAC,GAAyDrB,EAAAsB,KAAAtB,EAAAS,cAAA,QAAAY,IAA0CE,WAAA,0BAAmC,GAAAnB,EAAA,OAAgByB,YAAA,aAAAtB,OAAgCU,KAAA,OAAYb,EAAA,UAAeG,OAAOQ,KAAA,UAAAe,QAAA9B,EAAA+B,SAAuCL,IAAKC,MAAA3B,EAAAgC,WAAqBhC,EAAA+B,QAAA3B,EAAA,QAAAJ,EAAAiC,GAAAjC,EAAAkC,GAAAlC,EAAAmC,YAAA,WAAA/B,EAAA,QAAAJ,EAAAiC,GAAA,wBAAA7B,EAAA,YAAkIG,OAAOK,MAAA,QAAAC,cAAA,GAAAC,KAAA,aAAmDV,EAAA,OAAYG,OAAOQ,KAAA,OAAAC,OAAA,MAA2BZ,EAAA,OAAYG,OAAOU,KAAA,QAAab,EAAA,SAAcG,OAAOQ,KAAA,OAAAG,YAAA,YAAuCkB,UAAWC,MAAA,SAAAC,GAAyB,gBAAAA,IAAAtC,EAAAuC,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAAgF,YAAezC,EAAA0C,YAAA,eAA8BlC,OAAQW,MAAAnB,EAAAS,cAAA,QAAAW,SAAA,SAAAC,GAA2DrB,EAAAsB,KAAAtB,EAAAS,cAAA,UAAAY,IAA4CE,WAAA,4BAAqC,GAAAnB,EAAA,OAAgBG,OAAOU,KAAA,QAAY,WAAAb,EAAA,UAA2BG,OAAOQ,KAAA,WAAiBW,IAAKC,MAAA,SAAAW,GAAyBtC,EAAA0C,YAAA,iBAA+B1C,EAAAiC,GAAA,aACv7DU,2EC+CAC,GACAC,KAAA,cACAC,KAFA,WAGA,OACAC,YAAA,KACAtC,eACAuC,QAAA,GACAC,QAAA,GACAC,MAAA,IAEAC,QAAA,EACAxC,YACAuC,QACAE,UAAA,EAAAC,QAAA,UAAAC,QAAA,WAEAL,UACAG,UAAA,EAAAC,QAAA,WAAAC,QAAA,SAEAN,UACAI,UAAA,EAAAC,QAAA,SAAAC,QAAA,YAGAvB,SAAA,EACAI,YAAA,GACAV,WAAA,GACA8B,WAAA,KAGAC,UACAC,oBACAC,IADA,SACAvC,GACAlB,KAAA0D,aAAAxC,GAEAyC,IAJA,WAKA,SAAA3D,KAAA0D,eAIAE,QAtCA,WAuCA5D,KAAA6D,iBACAC,QAAAC,IAAA/D,KAAAgE,SAEAC,QA1CA,WA2CAjE,KAAA2B,kBAEAuC,SAEAC,cA/CA,aAiDAC,SACAP,eADA,eAAAQ,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,IAAA,IAAA7B,EAAA,OAAA2B,mBAAAG,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGAR,OAAAS,EAAA,kBAAAT,GAHA,OAGAzB,EAHA+B,EAAAI,KAIAhF,KAAA0D,YAAAb,OAAAa,YACA1D,KAAA8C,YAAAD,EALA+B,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAK,GAAAL,EAAA,YAOAd,QAAAoB,MAAAN,EAAAK,IAPA,yBAAAL,EAAAO,SAAAT,EAAA1E,OAAA,mCAAAqE,EAAAe,MAAApF,KAAAqF,YAAA,GAUA5C,YAVA,SAUA6C,GAAA,IAAAC,EAAAvF,KACAA,KAAAkD,QAAA,EACAlD,KAAAwF,MAAAF,GAAAG,SAAA,SAAAC,GACAA,EACAH,EAAAI,aAAAJ,EAAA/E,cAAAyC,MAAAsC,EAAA/E,cAAAwC,QAAA,GAEAc,QAAAC,IAAA,WAEAwB,EAAArC,QAAA,KAGAyC,aArBA,SAqBAC,EAAAC,EAAA/E,GAAA,IAAAgF,EAAA9F,KACA+F,EAAA,IAAAhB,EAAA,oBAAAa,EAAAC,EAAA/E,GACAwD,OAAAS,EAAA,gBAAAT,CAAAyB,GAAAC,KAAA,SAAAC,GACAA,EAAAC,SAAAC,QACAL,EAAAM,MAAA,cAAAC,EAAA,MACAzD,KAAA,UACA0D,MAAA,KACAC,GAAAT,EAAAU,OACAC,QACAC,MAAAT,EAAApD,KAAA6D,MACAC,SAAAV,EAAApD,KAAA+D,UAIAd,EAAAe,SAAA3B,MAAAe,EAAAC,SAAAY,KACAhB,EAAAM,MAAA,aAAAC,EAAA,MACAzD,KAAA,SACA0D,MAAA,KACAC,GAAAT,EAAAU,OACAC,QACAC,MAAA,KACAC,SAAA,UAIAb,EAAA5C,QAAA,IACA6D,MAAA,SAAAC,GACAlD,QAAAoB,MAAA8B,GACAlB,EAAA5C,QAAA,KAGAnB,QApDA,eAAAkF,EAAA3C,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAyC,IAAA,IAAAC,EAAAC,EAAAC,EAAArH,KAAA,OAAAwE,mBAAAG,KAAA,SAAA2C,GAAA,eAAAA,EAAAzC,KAAAyC,EAAAxC,MAAA,UAqDA,KAAA9E,KAAAQ,cAAAuC,QAAAwE,QAAA,UArDA,CAAAD,EAAAxC,KAAA,eAsDA9E,KAAA6G,SAAAW,QAAA,WAtDAF,EAAAG,OAAA,oBAyDA,SAAAzH,KAAAQ,cAAAyC,OAAAsE,QAAA,UAzDA,CAAAD,EAAAxC,KAAA,eA0DA9E,KAAA6G,SAAAW,QAAA,YA1DAF,EAAAG,OAAA,wBAAAH,EAAAxC,KAAA,EA6DAR,OAAAoD,EAAA,mBAAApD,EAAAvB,QAAA/C,KAAAQ,cAAAuC,QAAA4E,KAAA3H,KAAAsD,aA7DA,UA6DA6D,EA7DAG,EAAAtC,KA8DAmC,EAAAjB,SAAAC,QA9DA,CAAAmB,EAAAxC,KAAA,gBA+DA9E,KAAA6G,SAAA3B,MAAA,gBA/DAoC,EAAAG,OAAA,kBAkEAzH,KAAA8B,SAAA,EACA9B,KAAAkC,YAAA,GACAkF,EAAAQ,YAAA,WACAP,EAAAnF,aAAA,IACA2F,cAAAT,GACAC,EAAAvF,SAAA,GAEAuF,EAAAnF,YAAAmF,EAAAnF,YAAA,GACA,KACAoC,OAAAoD,EAAA,eAAApD,EAAArB,MAAAjD,KAAAQ,cAAAyC,MAAAnC,KAAA,EAAAiC,QAAA/C,KAAAQ,cAAAuC,QAAA+E,YAAA9H,KAAAsD,aAAA0C,KAAA,SAAAC,GACAA,EAAAC,SAAAC,QACAkB,EAAAR,SAAAV,QAAA,WAEAkB,EAAAR,SAAA3B,MAAAe,EAAAC,SAAAY,OA/EA,yBAAAQ,EAAAnC,SAAA+B,EAAAlH,SAAA,yBAAAiH,EAAA7B,MAAApF,KAAAqF,YAAA,GAmFA1D,eAnFA,WAmFA,IAAAoG,EAAA/H,KACAsE,OAAAoD,EAAA,cAAApD,GAAA0B,KAAA,SAAAC,GACA8B,EAAAvG,WAAA,qBAAAwG,OAAA/B,EAAApD,KAAAoF,OACAF,EAAAzE,WAAA2C,EAAApD,KAAA8E,UCvLoWO,EAAA,0BCQpWC,EAAgB7D,OAAA8D,EAAA,KAAA9D,CACd4D,EACApI,EACA4C,GACF,EACA,KACA,KACA,MAIAyF,EAAAE,QAAAC,OAAA,kBACe,IAAAC,EAAAJ,UCnBAK,qDCDf,IAAA1I,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoByB,YAAA,oBAA8BzB,EAAA,OAAYyB,YAAA,sBAAgCzB,EAAA,MAAAJ,EAAAiC,GAAA,kBAAA7B,EAAA,cAAqDsB,IAAI0E,QAAApG,EAAA0I,mBAAAC,OAAA3I,EAAA4I,sBAAiE,IACjTjG,uECUAkG,GACAhG,KAAA,aACAiG,YACAL,WAAAD,EAAA,MAEAnE,SACAqE,mBADA,SACA5F,GAAA,IAAA0C,EAAAvF,KACA8I,EAAA9I,KAAA+I,SAAA/I,KAAAgJ,OAAAC,QAAA,kBACApG,EAAA4D,OAAAE,SAAAuC,QAAAJ,EAAAI,QACAlJ,KAAAgJ,OAAAG,OAAA,gBAAAtG,EAAA4D,OAAAC,OACA1G,KAAAgJ,OAAAG,OAAA,mBAAAtG,EAAA4D,OAAAE,UACArC,OAAA8E,EAAA,UAAA9E,EAAA+E,GAAAxG,EAAA4D,OAAAE,SAAA0C,GAAAH,QAAArG,EAAA4D,OAAAE,SAAAuC,UAAAlD,KAAA,SAAAC,GACAA,EAAAC,SAAAC,QACAZ,EAAA+D,QAAA/B,SAAA3E,KAAA,UAEA2C,EAAAsB,SAAA3B,MAAAe,EAAAC,SAAAY,KACAvB,EAAA+D,QAAA/B,SAAA3E,KAAA,aAEAmE,MAAA,SAAAC,GACAlD,QAAAoB,MAAA8B,MAGA2B,kBAjBA,SAiBA9F,GACAiB,QAAAoB,MAAArC,MClCmV0G,EAAA,0BCQnVpB,EAAgB7D,OAAA8D,EAAA,KAAA9D,CACdiF,EACAzJ,EACA4C,GACF,EACA,KACA,WACA,MAIAyF,EAAAE,QAAAC,OAAA,gBACekB,EAAA,WAAArB,sECpBf,IAAAsB,EAAA9J,EAAA,QAAA+J,EAAA/J,EAAAE,EAAA4J,GAAieC,EAAG","file":"js/chunk-3b572fce.1221337e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=style&index=0&id=5263b7d6&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=style&index=0&id=5263b7d6&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"phoneForm\",attrs:{\"model\":_vm.userLoginInfo,\"rules\":_vm.validators}},[_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":90,\"prop\":\"captcha\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入验证码获取随机密码\"},model:{value:(_vm.userLoginInfo.captcha),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"captcha\", $$v)},expression:\"userLoginInfo.captcha\"}})],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('img',{attrs:{\"src\":_vm.captchaUrl},on:{\"click\":_vm.refreshCaptcha}})])],1)],1),_c('FormItem',{attrs:{\"label\":\"手机号码\",\"label-width\":90,\"prop\":\"phone\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{staticClass:\"phone-col\",attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入随机密码\"},model:{value:(_vm.userLoginInfo.phone),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"phone\", $$v)},expression:\"userLoginInfo.phone\"}})],1),_c('Col',{staticClass:\"button-col\",attrs:{\"span\":\"8\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.smsWait},on:{\"click\":_vm.sendSms}},[(!_vm.smsWait)?_c('span',[_vm._v(\"发送短信\")]):_c('span',[_vm._v(_vm._s((_vm.smsWaitTime + \"秒后重试\")))])])],1)],1)],1),_c('FormItem',{attrs:{\"label\":\"短信验证码\",\"label-width\":90,\"prop\":\"smsCode\"}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入短信验证码\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.handleLogin('phoneForm')}},model:{value:(_vm.userLoginInfo.smsCode),callback:function ($$v) {_vm.$set(_vm.userLoginInfo, \"smsCode\", $$v)},expression:\"userLoginInfo.smsCode\"}})],1),_c('Col',{attrs:{\"span\":\"8\"}})],1)],1)],1),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleLogin('phoneForm')}}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Form ref=\"phoneForm\" :model=\"userLoginInfo\" :rules=\"validators\">\n      <FormItem label=\"验证码\" :label-width=\"90\" prop=\"captcha\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\">\n            <Input type=\"text\" v-model=\"userLoginInfo.captcha\" placeholder=\"请输入验证码获取随机密码\" />\n          </Col>\n          <Col span=\"8\">\n            <img :src=\"captchaUrl\" @click=\"refreshCaptcha\">\n          </Col>\n        </Row>\n      </FormItem>\n\n      <FormItem label=\"手机号码\" :label-width=\"90\" prop=\"phone\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\" class=\"phone-col\">\n              <Input type=\"text\" v-model=\"userLoginInfo.phone\" placeholder=\"请输入随机密码\" />\n          </Col>\n          <Col span=\"8\" class=\"button-col\">\n              <Button type=\"primary\" :loading=\"smsWait\" @click=\"sendSms\">\n                <span v-if=\"!smsWait\">发送短信</span>\n                <span v-else>{{`${smsWaitTime}秒后重试`}}</span>\n              </Button>\n          </Col>\n      </Row>\n\n      </FormItem >\n\n      <FormItem label=\"短信验证码\" :label-width=\"90\" prop=\"smsCode\">\n        <Row type=\"flex\" :gutter=\"16\">\n          <Col span=\"16\">\n            <Input type=\"text\" v-model=\"userLoginInfo.smsCode\" placeholder=\"请输入短信验证码\" @keyup.native.enter=\"handleLogin('phoneForm')\"/>\n          </Col>\n          <Col span=\"8\">\n          </Col>\n        </Row>\n      </FormItem>\n    </Form>\n    <Button type=\"primary\" @click=\"handleLogin('phoneForm')\">登录</Button>\n  </div>\n</template>\n\n<script>\nimport { LoginParamsModel, requestLogin, getSettingInfo } from '@/api/login'\nimport { sendSmsCode, getCaptcha, validateCaptcha } from '@/api/sms'\nimport { EmitModel } from '@/libs/EmitModel'\n\nexport default {\n  name: 'phone-login',\n  data () {\n    return {\n      settingInfo: null,\n      userLoginInfo: {\n        captcha: '',\n        smsCode: '',\n        phone: ''\n      },\n      loging: false,\n      validators: {\n        phone: [\n          { required: true, message: '请输入手机号码', trigger: 'change' }\n        ],\n        smsCode: [\n          { required: true, message: '请输入短信验证码', trigger: 'blur' }\n        ],\n        captcha: [\n          { required: true, message: '请输入验证码', trigger: 'change' }\n        ]\n      },\n      smsWait: false,\n      smsWaitTime: 60,\n      captchaUrl: '',\n      captchaUid: ''\n    }\n  },\n  computed: {\n    currentNetworkType: {\n      set (value) {\n        this.networkType = +value\n      },\n      get () {\n        return '' + this.networkType\n      }\n    }\n  },\n  created () {\n    this.getSettingInfo()\n    console.log(this.$route)\n  },\n  mounted () {\n    this.refreshCaptcha()\n  },\n  watch: {\n  },\n  beforeDestroy () {\n  },\n  methods: {\n    async getSettingInfo () {\n      try {\n        const data = await getSettingInfo()\n        this.networkType = data.data.networkType\n        this.settingInfo = data\n      } catch (err) {\n        console.error(err)\n      }\n    },\n    handleLogin (form) {\n      this.loging = true\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          this.loginRequest(this.userLoginInfo.phone, this.userLoginInfo.smsCode, 1)\n        } else {\n          console.log('表单验证未通过')\n        }\n        this.loging = false\n      })\n    },\n    loginRequest (usr, psw, type) {\n      const loginParams = new LoginParamsModel(usr, psw, type)\n      requestLogin(loginParams).then(resp => {\n        if (resp.response.success) {\n          this.$emit('success', new EmitModel({\n            name: 'success',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: resp.data.token,\n              userInfo: resp.data.user\n            }\n          }))\n        } else {\n          this.$Message.error(resp.response.msg)\n          this.$emit('failed', new EmitModel({\n            name: 'failed',\n            event: null,\n            vn: this.$vnode,\n            params: {\n              token: null,\n              userInfo: null\n            }\n          }))\n        }\n        this.loging = false\n      }).catch(err => {\n        console.error(err)\n        this.loging = false\n      })\n    },\n    async sendSms () {\n      if (this.userLoginInfo.captcha.replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入验证码！')\n        return\n      }\n      if (('' + this.userLoginInfo.phone).replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入手机号码！')\n        return\n      }\n      const validateResp = await validateCaptcha({ captcha: this.userLoginInfo.captcha, uuid: this.captchaUid })\n      if (!validateResp.response.success) {\n        this.$Message.error('验证码错误，请重新输入！')\n        return\n      }\n      this.smsWait = true\n      this.smsWaitTime = 60\n      const timer = setInterval(() => {\n        if (this.smsWaitTime <= 1) {\n          clearInterval(timer)\n          this.smsWait = false\n        }\n        this.smsWaitTime = this.smsWaitTime - 1\n      }, 1000)\n      sendSmsCode({ phone: this.userLoginInfo.phone, type: 2, captcha: this.userLoginInfo.captcha, captchaUuid: this.captchaUid }).then(resp => {\n        if (resp.response.success) {\n          this.$Message.success('短信发送成功！')\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      })\n    },\n    refreshCaptcha () {\n      getCaptcha().then(resp => {\n        this.captchaUrl = `data:image;base64,${resp.data.image}`\n        this.captchaUid = resp.data.uuid\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./phone-login.vue?vue&type=template&id=0a4319bc&\"\nimport script from \"./phone-login.vue?vue&type=script&lang=js&\"\nexport * from \"./phone-login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./phone-login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"phone-login.vue\"\nexport default component.exports","import phoneLogin from './phone-login'\nexport default phoneLogin\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticClass:\"bind-phone-page\"},[_c('Row',{staticClass:\"bind-phone-header\"},[_c('h1',[_vm._v(\"绑定电话号码继续使用\")])]),_c('phoneLogin',{on:{\"success\":_vm.handleLoginSuccess,\"failed\":_vm.handleLoginFailed}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nLayout.bind-phone-page\n  Row.bind-phone-header\n    h1 绑定电话号码继续使用\n  phoneLogin(@success='handleLoginSuccess', @failed='handleLoginFailed')\n</template>\n\n<script>\nimport phoneLogin from '@/components/phone-login'\nimport { bindWx } from '@/api/weixin'\n\nexport default {\n  name: 'bind-phone',\n  components: {\n    phoneLogin\n  },\n  methods: {\n    handleLoginSuccess (data) {\n      const tmpUserInfo = this.deepCopy(this.$store.getters['user/userInfo'])\n      data.params.userInfo.unionid = tmpUserInfo.unionid\n      this.$store.commit('user/setToken', data.params.token)\n      this.$store.commit('user/setUserInfo', data.params.userInfo)\n      bindWx({ id: data.params.userInfo.id, unionid: data.params.userInfo.unionid }).then(resp => {\n        if (resp.response.success) {\n          this.$router.replace({ name: 'Home' })\n        } else {\n          this.$Message.error(resp.response.msg)\n          this.$router.replace({ name: 'Login' })\n        }\n      }).catch(err => {\n        console.error(err)\n      })\n    },\n    handleLoginFailed (data) {\n      console.error(data)\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.bind-phone-page\n  min-height 50vh\n  max-height 70vh\n  position absolute\n  top 50%\n  left 50%\n  transform translateX(-50%) translateY(-50%)\n  text-align center\n\n  .bind-phone-body\n    margin 0.5rem\n  .bind-phone-footer\n    .success-icon\n      color rgb(41, 189, 110)\n      font-size 1rem\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BindPhone.vue?vue&type=template&id=5263b7d6&scoped=true&lang=pug&\"\nimport script from \"./BindPhone.vue?vue&type=script&lang=js&\"\nexport * from \"./BindPhone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BindPhone.vue?vue&type=style&index=0&id=5263b7d6&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5263b7d6\",\n  null\n  \n)\n\ncomponent.options.__file = \"BindPhone.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}