(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74213099"],{"40ff":function(t,e,a){},"86bc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticClass:"case-page"},[a("Row",{staticClass:"tool-bar"},[a("div",{staticClass:"left"},[a("Input",{staticClass:"search-input",attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getCaseList(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[a("Button",{attrs:{slot:"append",icon:"md-search"},nativeOn:{click:function(e){return t.getCaseList(e)}},slot:"append"})],1)],1),a("div",{staticClass:"right"},[t.selectedCase.length?a("Button",{staticStyle:{"margin-right":"0.5rem"},attrs:{type:"error"},nativeOn:{click:function(e){return t.deleteCase(e)}}},[t._v("删除")]):t._e(),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"CaseDetail",params:{type:"new",id:0}})}}},[t._v("添加案例")])],1)]),a("Row",{staticClass:"tags"},[a("Tag",{attrs:{color:"success"},nativeOn:{click:function(e){t.searchTag(null)}}},[t._v("全部")]),t._l(t.tagList,function(e,n){return a("Tag",{key:n,attrs:{color:"success"},nativeOn:{click:function(a){t.searchTag(e)}}},[t._v(t._s(e.tagName))])})],2),a("Row",{staticClass:"case-list"},[a("Table",{staticClass:"case-table",attrs:{columns:t.columns,data:t.caseList},on:{"on-selection-change":t.selectCase}})],1),a("Row",{staticClass:"pagination"},[a("Page",{attrs:{total:t.paginationData.total,current:t.paginationData.page,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)},s=[],i=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("d4f4")),c=a("db6a"),o={name:"case",data:function(){var t=this;return{searchKey:"",currentEditData:{},columns:[{type:"selection",width:60,align:"center"},{title:"序号",width:60,render:function(t,e){e.row,e.column;var a=e.index;return t("span","#".concat(a+1))}},{title:"标题",key:"title",render:function(e,a){var n=a.row;a.column,a.index;return e("a",{attrs:{href:"javascript: void(0)"},on:{click:function(){t.openEditModal(n)}}},n.title)}},{title:"标签",key:"tag",render:function(t,e){var a=[];e.row.tagInfo=e.row.tagInfo?e.row.tagInfo:[];var n=!0,s=!1,i=void 0;try{for(var c,o=e.row.tagInfo[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var r=c.value;a.push(t("Tag",{props:{color:"success"}},r.name))}}catch(t){s=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return t("div",{attrs:{class:"case-tags"}},a)}},{title:"内容",render:function(t,e){e.column;var a=e.row;e.index;return t("span",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}},a.content)}}],caseList:[],paginationData:{total:0,pageSize:10,page:1},selectedCase:[],tagList:[],selectedTag:null}},computed:{showEditModal:{get:function(){return"{}"!==JSON.stringify(this.currentEditData)},set:function(t){t||(this.currentEditData={})}}},created:function(){this.getCaseList(),this.getTagList()},mounted:function(){},methods:{getTagList:function(){var t=this;Object(c["getTagesByRelation"])({type:5}).then(function(e){var a=e.data,n=e.response;n.success?t.tagList=a:t.$Message.error(n.msg)})},openEditModal:function(t){this.$router.push({name:"CaseDetail",params:{type:"detail",id:t.id}})},getCaseList:function(){var t=this;Object(i["getCaseList"])({pageNo:this.paginationData.page,pageSize:this.paginationData.pageSize,title:this.searchKey||null,tagId:this.selectedTag?this.selectedTag.tagId:null}).then(function(e){var a=e.data,n=e.response;n.success&&(t.caseList=a.result,t.paginationData.total=a.totalCount)})},selectCase:function(t){this.selectedCase=t},deleteCase:function(){var t=this;this.$Modal.confirm({title:"提示",content:"警告⚠️删除后数据不可恢复，请确定是否删除？",onCancel:function(){},onOk:function(){Object(i["deleteCase"])({ids:t.selectedCase.map(function(t){return t.id})}).then(function(e){e.data;var a=e.response;a.success?(t.$Message.success("删除成功！"),t.getCaseList()):t.$Message.error(a.msg)})}})},changePage:function(t){this.paginationData.page=t,this.getCaseList()},changePageSize:function(t){this.paginationData.pageSize=t,this.getCaseList()},searchTag:function(t){this.selectedTag=t,this.getCaseList()}}},r=o,l=(a("c5c0"),a("f1e1"),a("2877")),u=Object(l["a"])(r,n,s,!1,null,"618f87f4",null);u.options.__file="Case.vue";e["default"]=u.exports},bac2:function(t,e,a){},c5c0:function(t,e,a){"use strict";var n=a("40ff"),s=a.n(n);s.a},f1e1:function(t,e,a){"use strict";var n=a("bac2"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-74213099.6d37fe6b.js.map