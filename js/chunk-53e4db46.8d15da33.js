(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53e4db46"],{1377:function(e,t,a){"use strict";var s=a("638e"),o=a.n(s);o.a},"15e3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Cascader",{attrs:{data:e.professionalData,"change-on-select":""},on:{"on-change":e.select},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},o=[],r=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("f400"),a("c5f6"),a("e668")),n={name:"professional-selector",props:{professionalId:{type:Number|String,required:!0}},data:function(){return{selected:[],professionalData:[],professionalMap:new Map}},created:function(){this.getProfessionalList()},watch:{professionalId:function(){this.makeSelected()}},computed:{},methods:{getProfessionalList:function(){var e=this;Object(r["getProfessionalList"])({}).then(function(t){t.response.success?(e.professionalData=e.makeData(t.data),e.makeSelected()):e.$Message.error(t.response.msg)}).catch(function(e){console.error(e)})},select:function(e,t){this.$emit("on-select",t[t.length-1])},makeData:function(e){var t=[],a=[],s=!0,o=!1,r=void 0;try{for(var n,i=e[Symbol.iterator]();!(s=(n=i.next()).done);s=!0){var l=n.value;l.value=l.id,l.label=l.name,this.professionalMap.set(l.id,l),l.parentId?a.push(l):t.push(l)}}catch(e){o=!0,r=e}finally{try{s||null==i.return||i.return()}finally{if(o)throw r}}for(var c=0;c<a.length;c++){var f=a[c],u=this.professionalMap.get(f.parentId);if(!u)return;u.children?u.children.push(f):u.children=[f]}return t},makeSelected:function(){if(this.professionalId&&this.professionalMap.size){this.selected=[this.professionalId];var e=this.professionalMap.get(this.professionalId),t=e?this.professionalMap.get(e.parentId):null;while(t)this.selected.splice(0,0,t.id),t=this.professionalMap.get(t.parentId)}}}},i=n,l=(a("1377"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,null,null);c.options.__file="professional-selector.vue";var f=c.exports;t["a"]=f},"4dc4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"professional-detail"},[a("Row",{staticClass:"tool-bar",attrs:{type:"flex"}},[a("a",{attrs:{href:"javascript: void(0)"},on:{click:function(t){e.$router.go(-1)}}},[a("icon",{attrs:{type:"ios-arrow-back"}}),e._v("\n      返回\n    ")],1),a("div",{staticClass:"tool-right"},["edit"===e.pageType?a("Button",{attrs:{type:"error",size:"small"},nativeOn:{click:function(t){return e.deleteProfessional(t)}}},[e._v("删除")]):e._e()],1)]),a("Form",{ref:"formRefs",staticClass:"professional-form",attrs:{model:e.formData,rules:e.validators,"label-width":72}},[a("FormItem",{attrs:{label:"上级条目",prop:"parentId"}},[a("professional-selector",{attrs:{professionalId:e.formData.parentId},on:{"on-select":e.selectParent}})],1),a("FormItem",{attrs:{label:"专业名称",prop:"name"}},[a("Input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"专业别名"}},[a("Input",{model:{value:e.formData.alias,callback:function(t){e.$set(e.formData,"alias",t)},expression:"formData.alias"}})],1),a("FormItem",{attrs:{label:"检索索引"}},[a("Input",{model:{value:e.formData.indexKey,callback:function(t){e.$set(e.formData,"indexKey",t)},expression:"formData.indexKey"}})],1),a("FormItem",{attrs:{label:"显示顺序"}},[a("Input",{model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),a("Row",{staticClass:"bottom-btns"},[a("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.saveProfessional(t)}}},[e._v("保存")])],1)],1)},o=[],r=a("e668"),n=a("15e3"),i={name:"professional-detail",components:{"professional-selector":n["a"]},data:function(){var e=this,t=function(t,a,s){""+a&&""+a===e.formData.id?s(new Error("不能选择自己为上级")):s()};return{pageType:"",formData:{id:null,name:"",parentId:null,alias:"",sort:0,indexKey:"",level:0},validators:{parentId:[{validator:t,trigger:"change"}],name:[{required:!0,message:"请输入专业分类名称",trigger:"change"}]}}},created:function(){this.initPage()},methods:{initPage:function(){this.pageType=this.$route.params.type,"edit"===this.pageType&&(this.formData=JSON.parse(this.$route.params.data))},selectParent:function(e){e&&(this.formData.parentId=e.id,this.formData.level=+e.level+1)},saveProfessional:function(){var e=this;this.$refs.formRefs.validate(function(t){t&&Object(r["saveProfessional"])(e.formData).then(function(t){t.response.success?(e.$Message.success("保存成功！"),e.$router.go(-1)):e.$Message.error(t.response.msg)}).catch(function(e){console.error(e)})})},deleteProfessional:function(){var e=this;Object(r["deleteProfessional"])({ids:[this.formData.id]}).then(function(t){t.response.success?(e.$Message.success("删除成功！"),e.$router.go(-1)):e.$Message.error(t.response.msg)}).catch(function(e){console.error(e)})}}},l=i,c=(a("ffb3"),a("2877")),f=Object(c["a"])(l,s,o,!1,null,"6d883624",null);f.options.__file="ProfessionalDetail.vue";t["default"]=f.exports},"5ea8":function(e,t,a){},"638e":function(e,t,a){},ffb3:function(e,t,a){"use strict";var s=a("5ea8"),o=a.n(s);o.a}}]);
//# sourceMappingURL=chunk-53e4db46.8d15da33.js.map