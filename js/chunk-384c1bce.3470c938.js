(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-384c1bce"],{2486:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blank"},[n("div",{staticClass:"question-title"},[n("span",{staticClass:"badge"},[e._v(e._s(e.required?"必填":"选填"))]),n("span",{staticClass:"title"},[e._v(e._s(e.title))]),e.description&&e.description.replace(/\s/g,"")?n("span",{staticClass:"description"},[e._v("（"+e._s(e.description)+"）")]):e._e()]),n("Form",{attrs:{model:e.model,rules:e.validators}},[n("FormItem",{attrs:{prop:"value"}},[n("xInput",{attrs:{type:"number",readonly:e.readonly},on:{"on-keyup":function(t){e.inputChange()},"on-blur":e.blur},model:{value:e.model.moneyText,callback:function(t){e.$set(e.model,"moneyText",t)},expression:"model.moneyText"}})],1)],1)],1)},i=[],s=(n("96cf"),n("3040")),a=(n("ac4d"),n("8a81"),n("ac6a"),n("c5f6"),n("386d"),n("a481"),n("4f51")),o=n("8d8b"),l={name:"money-input",props:{schemaKey:{type:String,require:!0},title:{type:String,default:""},description:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},additionalKeys:{type:Array},validate:{type:Boolean},readonly:{type:Boolean},readonlyData:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},schemaType:{type:String},apiType:{type:String}},data:function(){return{uuid:"00000000-0000-0000-0000-000000000003",moneyText:"",moneyValue:"",moneyPreview:"",refuseCharacotr:/[^0-9０１２３４５６７８９千万亿,.]/g,unit:/([千万亿])/g,weightMap:{1000:/千/,10000:/万/,100000000:/亿/},model:{moneyText:""},validators:{moneyText:[{required:this.required,message:"该项目为必填！",trigger:"blur"}]}}},mounted:function(){this.model.moneyText=this.value,(this.value||!this.value&&0==this.value)&&(console.log("1111"),this.inputChange(!0))},methods:{validateForm:function(){var e=this;return new Promise(function(t,n){e.$refs.moneyForm.validate(function(e){e?t():n(new Error("失败"))})})},formatInput:function(){this.model.moneyText=this.model.moneyText.replace(this.refuseCharacotr,""),this.model.moneyText=this.model.moneyText.replace(",",""),this.model.moneyText=this.model.moneyText.replace(/[０１２３４５６７８９]/g,function(e){return"０１２３４５６７８９".indexOf(e)});var e=this.model.moneyText.search(this.unit);if(-1!==e){for(;e<this.model.moneyText.length;e++)if(this.model.moneyText[e].search(this.unit))break;this.model.moneyText=this.model.moneyText.slice(0,e)}e=this.model.moneyText.search(/[^0-9]/),-1===e&&(e=this.model.moneyText.length)},inputChange:function(e){var t=this.model.moneyText.replace(/[,，]/g,""),n=0,r="",i="",s=-1;for(var o in t)if(isNaN(t[o])&&"."!==t[o]){s=o;break}if(-1!==s){r=t.slice(0,s),i=t.slice(s),n=Number(r);var l=!0,u=!1,c=void 0;try{for(var h,d=i[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var m=h.value;console.log(this.getWeight(m)),n*=this.getWeight(m)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}else n=Number(t);this.numValue=n,this.moneyPreview=Object(a["a"])(n),this.$emit("input",{schemaKey:this.schemaKey,value:String(this.numValue),server:this.server,first:e})},getWeight:function(e){for(var t in this.weightMap)if(-1!==e.search(this.weightMap[t]))return Number(t);return 0},blur:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.additionalKeys&&this.additionalKeys.length&&this.$emit("additional",{allowClose:!0,additionalKeys:this.additionalKeys}),!this.validate){e.next=6;break}return e.next=4,Object(o["default"])(this.schemaType,this.apiType,{projectId:this.$route.query.projectId,valueJson:'{"'+this.schemaKey+'":"'+this.currentValue+'"}'});case 4:t=e.sent,!1===t.response.success&&t.response.msg?this.$Message.error(t.response.msg):!0===t.response.success&&t.response.msg&&this.$Message.info(t.response.msg);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},u=l,c=(n("f9f7"),n("2877")),h=Object(c["a"])(u,r,i,!1,null,"cc2fa8aa",null);h.options.__file="moneyInput.vue";t["default"]=h.exports},"386d":function(e,t,n){n("214f")("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},"3de6":function(e,t,n){},"4f51":function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("28a5"),n("c5f6"),n("6b54"),n("a481");function r(e){var t=2;if(e=e.toString().replace(/,/g,""),e=e.replace(/^0+/,""),""===e)return"零元整";if(isNaN(e))return"错误：金额不是合法的数值！";var n="",r="";e.length>1&&(0===e.indexOf("-")&&(e=e.replace("-",""),n="负"),0===e.indexOf("+")&&(e=e.replace("+","")));var i,s,a,o,l,u,c,h,d,m,p,f,y="",g="",v="undefined"===typeof t||null==t||Number(t)<0||Number(t)>5;if(s=e.split("."),s.length>1){y=s[0],g=s[1],v&&(t=g.length>5?5:g.length);var b=Number("0."+g);b*=Math.pow(10,t),b=Math.round(Math.abs(b)),b/=Math.pow(10,t);var x=b.toString().split(".");1===Number(x[0])&&(y=(Number(y)+1).toString()),g=x.length>1?x[1]:""}else y=e,g="",v&&(t=0);if(y.length>44)return"错误：金额值太大了！整数位长【"+y.length.toString()+"】超过了上限——44位/千正/10^43（注：1正=1万涧=1亿亿亿亿亿，10^40）！";if(a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],o=["","拾","佰","仟"],l=["","万","亿","兆","京","垓","杼","穰","沟","涧","正"],u=["角","分","厘","毫","丝"],i="",Number(y)>0){for(c=0,h=0;h<y.length;h++)d=y.length-h-1,m=y.substr(h,1),p=d/4,f=d%4,"0"===m?c++:(c>0&&(i+=a[0]),c=0,i+=a[Number(m)]+o[f]),0===f&&c<4&&(i+=l[p]);i+="元"}for(h=0;h<g.length;h++)m=g.substr(h,1),"0"!==m&&(i+=a[Number(m)]+u[h]);return""===i&&(i="零元"),""===g&&(i+="整"),i=r+n+i,i}},f9f7:function(e,t,n){"use strict";var r=n("3de6"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-384c1bce.3470c938.js.map