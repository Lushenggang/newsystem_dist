{"version":3,"sources":["webpack:///./src/pages/AccountSetting.vue?ddcd","webpack:///./src/components/weixin-login/weixin-login.vue?161a","webpack:///src/components/weixin-login/weixin-login.vue","webpack:///./src/components/weixin-login/weixin-login.vue?c88f","webpack:///./src/components/weixin-login/weixin-login.vue","webpack:///./src/components/weixin-login/index.js","webpack:///./src/pages/AccountSetting.vue?e375","webpack:///src/pages/AccountSetting.vue","webpack:///./src/pages/AccountSetting.vue?aa76","webpack:///./src/pages/AccountSetting.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AccountSetting_vue_vue_type_style_index_0_id_3e74a96a_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AccountSetting_vue_vue_type_style_index_0_id_3e74a96a_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","_s","title","src","qrCode","staticClass","wxLoginMsg","staticRenderFns","weixin_loginvue_type_script_lang_js_","name","props","type","String","required","default","data","wxUUID","created","getQRCode","methods","_this","Object","login","then","_ref","status","result","imgData","getWxCode","_this2","uuid","_ref2","msg","$emit","code","content","timer","setTimeout","clearTimeout","console","log","catch","err","error","weixin_login_weixin_loginvue_type_script_lang_js_","component","componentNormalizer","options","__file","weixin_login","weixinLogin","justify","model","userInfo","label","label-width","gutter","avatarUrl","alt","on","click","uploadImage","ref","staticStyle","display","accept","change","selectedImage","placeholder","value","callback","$$v","$set","expression","disabled","size","$event","bindPhoneModal","refreshCaptcha","bindEmailModal","saveUserInfo","mask-closable","slot","captcha","captchaUrl","settingInfo","loading","smsWait","sendSms","smsWaitTime","closeModal","confirmBind","emailCodeWait","sendEmailVcode","emailCodeWaitTime","bindWxModal","AccountSettingvue_type_script_lang_js_","components","bindWx","captchaUuid","emailCodeUuid","phone","smsVcode","email","emailVcode","computed","avatar","$avatarUrl","replace","deepCopy","$store","getters","initeSettingInfo","$refs","avatarInput","e","file","target","files","api_file","resp","commit","validateCaptcha","_validateCaptcha2","asyncToGenerator","regeneratorRuntime","mark","_callee","validateResp","wrap","_context","prev","next","sms","sent","response","success","$Message","abrupt","stop","apply","arguments","concat","image","_sendEmailVcode2","_callee2","_this3","_context2","warning","setInterval","clearInterval","_sendSms","_callee3","_this4","_context3","_this5","_this$settingInfo","accountSetting","_this$settingInfo2","_id","_this6","_this$userInfo","bindWxSuccess","params","pages_AccountSettingvue_type_script_lang_js_","__webpack_exports__"],"mappings":"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","file":"js/chunk-b34c5698.953cc072.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSetting.vue?vue&type=style&index=0&id=3e74a96a&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSetting.vue?vue&type=style&index=0&id=3e74a96a&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',[_c('div',{attrs:{\"id\":\"qrcode\"}},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('img',{attrs:{\"src\":_vm.qrCode}}),_c('div',{staticClass:\"show-msg\"},[_vm._v(_vm._s(_vm.wxLoginMsg))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Layout>\n    <div id=\"qrcode\">\n      <h2>{{title}}</h2>\n      <img :src=\"qrCode\">\n      <div class=\"show-msg\">{{wxLoginMsg}}</div>\n    </div>\n  </Layout>\n</template>\n\n<script>\nimport { getQRCode, getWxCode } from '@/api/login'\nexport default {\n  name: 'weixin-login',\n  props: {\n    type: {\n      type: String,\n      required: false,\n      default: 'login'\n    },\n    title: String\n  },\n  data () {\n    return {\n      wxUUID: '',\n      qrCode: '',\n      wxLoginMsg: '请用微信扫描二维码登录'\n    }\n  },\n  created () {\n    this.getQRCode()\n  },\n  methods: {\n    getQRCode () {\n      getQRCode().then(({ status, result }) => {\n        this.wxUUID = result.wxUUID\n        this.qrCode = result.imgData\n        this.getWxCode(this.wxUUID)\n      })\n    },\n    getWxCode () {\n      getWxCode({\n        uuid: this.wxUUID\n      }).then(({ result, status, msg }) => {\n        if (status && status === 405) {\n          this.wxLoginMsg = msg\n          this.$emit('success', result.code)\n        } else if (status === 500) {\n          this.getQRCode()\n        } else {\n          if (status && status === 404) {\n            this.wxLoginMsg = msg.title + ', ' + msg.content\n          }\n          const timer = setTimeout(() => {\n            this.getWxCode()\n            clearTimeout(timer)\n          }, 2000)\n          console.log(result)\n        }\n      }).catch(err => {\n        const timer = setTimeout(() => {\n          this.getWxCode()\n          clearTimeout(timer)\n        }, 2000)\n        console.error(err)\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./weixin-login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./weixin-login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./weixin-login.vue?vue&type=template&id=6ac4b36c&\"\nimport script from \"./weixin-login.vue?vue&type=script&lang=js&\"\nexport * from \"./weixin-login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"weixin-login.vue\"\nexport default component.exports","import weixinLogin from './weixin-login'\nexport default weixinLogin\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticClass:\"account-setting-page\"},[_c('Row',{staticClass:\"account-setting-title\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('h1',[_vm._v(\"账号设置\")])]),_c('Row',{staticClass:\"account-setting-body\",attrs:{\"type\":\"flex\"}},[_c('Form',{staticClass:\"form-body\",attrs:{\"model\":_vm.userInfo}},[_c('FormItem',{attrs:{\"label\":\"头像\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[(_vm.userInfo.avatar)?_c('img',{staticClass:\"avatar-image\",attrs:{\"src\":_vm.avatarUrl,\"alt\":\"avatar\"},on:{\"click\":_vm.uploadImage}}):_c('div',{staticClass:\"avatar-bomb\",on:{\"click\":_vm.uploadImage}},[_vm._v(\"点击上传头像\")]),_c('input',{ref:\"avatarInput\",staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"avatarInput\",\"type\":\"file\",\"accept\":\"image/*\",\"name\":\"avatarInput\"},on:{\"change\":_vm.selectedImage}})])],1),_c('FormItem',{attrs:{\"label\":\"姓名\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入姓名\"},model:{value:(_vm.userInfo.name),callback:function ($$v) {_vm.$set(_vm.userInfo, \"name\", $$v)},expression:\"userInfo.name\"}})],1)],1),_c('FormItem',{attrs:{\"label\":\"绑定手机号\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userInfo.phone),callback:function ($$v) {_vm.$set(_vm.userInfo, \"phone\", $$v)},expression:\"userInfo.phone\"}}),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.bindPhoneModal = true;_vm.refreshCaptcha()}}},[_vm._v(\"重新绑定手机号\")])],1)],1),_c('FormItem',{attrs:{\"label\":\"绑定邮箱\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}}),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.bindEmailModal = true;_vm.refreshCaptcha()}}},[_vm._v(\"重新绑定邮箱\")])],1)],1)],1),_c('Button',{staticClass:\"save-button\",attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.saveUserInfo}},[_vm._v(\"保存\")])],1),_c('Modal',{attrs:{\"mask-closable\":false},model:{value:(_vm.bindPhoneModal),callback:function ($$v) {_vm.bindPhoneModal=$$v},expression:\"bindPhoneModal\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"绑定手机号码\")]),_c('div',{staticClass:\"modal-body\"},[_c('Form',[_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.captcha),callback:function ($$v) {_vm.captcha=$$v},expression:\"captcha\"}}),_c('img',{attrs:{\"src\":_vm.captchaUrl,\"alt\":\"验证码\"},on:{\"click\":_vm.refreshCaptcha}})],1)],1),_c('FormItem',{attrs:{\"label\":\"手机号\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入手机号\"},model:{value:(_vm.settingInfo.phone),callback:function ($$v) {_vm.$set(_vm.settingInfo, \"phone\", $$v)},expression:\"settingInfo.phone\"}}),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"loading\":_vm.smsWait},on:{\"click\":_vm.sendSms}},[(!_vm.smsWait)?_c('span',[_vm._v(\"发送验证码\")]):_c('span',[_vm._v(_vm._s((_vm.smsWaitTime + \"秒后重试\")))])])],1)],1),_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.settingInfo.smsVcode),callback:function ($$v) {_vm.$set(_vm.settingInfo, \"smsVcode\", $$v)},expression:\"settingInfo.smsVcode\"}})],1)],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"default\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"取消\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.confirmBind('phone')}}},[_vm._v(\"确定\")])],1)]),_c('Modal',{attrs:{\"mask-closable\":false},model:{value:(_vm.bindEmailModal),callback:function ($$v) {_vm.bindEmailModal=$$v},expression:\"bindEmailModal\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"绑定邮箱\")]),_c('div',{staticClass:\"modal-body\"},[_c('Form',[_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.captcha),callback:function ($$v) {_vm.captcha=$$v},expression:\"captcha\"}}),_c('img',{attrs:{\"src\":_vm.captchaUrl,\"alt\":\"验证码\"},on:{\"click\":_vm.refreshCaptcha}})],1)],1),_c('FormItem',{attrs:{\"label\":\"邮箱\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入邮箱地址\"},model:{value:(_vm.settingInfo.email),callback:function ($$v) {_vm.$set(_vm.settingInfo, \"email\", $$v)},expression:\"settingInfo.email\"}}),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"loading\":_vm.emailCodeWait},on:{\"click\":_vm.sendEmailVcode}},[(!_vm.emailCodeWait)?_c('span',[_vm._v(\"发送验证码\")]):_c('span',[_vm._v(_vm._s((_vm.emailCodeWaitTime + \"秒后重试\")))])])],1)],1),_c('FormItem',{attrs:{\"label\":\"验证码\",\"label-width\":80}},[_c('Row',{attrs:{\"type\":\"flex\",\"gutter\":16}},[_c('Input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.settingInfo.emailVcode),callback:function ($$v) {_vm.$set(_vm.settingInfo, \"emailVcode\", $$v)},expression:\"settingInfo.emailVcode\"}})],1)],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"default\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"取消\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){_vm.confirmBind('email')}}},[_vm._v(\"确定\")])],1)]),_c('Modal',{attrs:{\"mask-closable\":false},model:{value:(_vm.bindWxModal),callback:function ($$v) {_vm.bindWxModal=$$v},expression:\"bindWxModal\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"绑定微信\")]),_c('div',{staticClass:\"modal-body bind-wx\"},[_c('bindWx')],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"default\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"取消\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nLayout.account-setting-page\n  Row.account-setting-title(type='flex', justify='center')\n    h1 账号设置\n  Row.account-setting-body(type='flex')\n    Form.form-body(:model='userInfo')\n      FormItem(label='头像', :label-width='80')\n        Row(type='flex', :gutter='16')\n          img.avatar-image(v-if='userInfo.avatar', :src='avatarUrl', alt='avatar', @click='uploadImage')\n          .avatar-bomb(v-else='', @click='uploadImage') 点击上传头像\n          input#avatarInput(type='file', accept='image/*', name='avatarInput', style='display: none;', ref='avatarInput', @change='selectedImage')\n      FormItem(label='姓名', :label-width='80')\n        Row(type='flex', :gutter='16')\n          Input(v-model='userInfo.name', placeholder='请输入姓名')\n      FormItem(label='绑定手机号', :label-width='80')\n        Row(type='flex', :gutter='16')\n          Input(disabled='', v-model='userInfo.phone')\n          Button(type='primary', size='small', @click='bindPhoneModal = true;refreshCaptcha()') 重新绑定手机号\n      FormItem(label='绑定邮箱', :label-width='80')\n        Row(type='flex', :gutter='16')\n          Input(disabled='', v-model='userInfo.email')\n          Button(type='primary', size='small', @click='bindEmailModal = true;refreshCaptcha()') 重新绑定邮箱\n    Button.save-button(type='success', size='small', @click='saveUserInfo') 保存\n  Modal(v-model='bindPhoneModal', :mask-closable='false')\n    div(slot='header') 绑定手机号码\n    .modal-body\n      Form\n        FormItem(label='验证码', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='captcha', placeholder='请输入验证码')\n            img(:src='captchaUrl', alt='验证码', @click='refreshCaptcha')\n        FormItem(label='手机号', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='settingInfo.phone', placeholder='请输入手机号')\n            Button(type='primary', size='small', :loading='smsWait', @click='sendSms')\n              span(v-if='!smsWait') 发送验证码\n              span(v-else='') {{`${smsWaitTime}秒后重试`}}\n        FormItem(label='验证码', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='settingInfo.smsVcode', placeholder='请输入验证码')\n    div(slot='footer')\n      Button(size='small', type='default', @click='closeModal')\n        | 取消\n      Button(size='small', type='primary', @click=\"confirmBind('phone')\")\n        | 确定\n  Modal(v-model='bindEmailModal', :mask-closable='false')\n    div(slot='header') 绑定邮箱\n    .modal-body\n      Form\n        FormItem(label='验证码', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='captcha', placeholder='请输入验证码')\n            img(:src='captchaUrl', alt='验证码', @click='refreshCaptcha')\n        FormItem(label='邮箱', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='settingInfo.email', placeholder='请输入邮箱地址')\n            Button(type='primary', size='small', :loading='emailCodeWait', @click='sendEmailVcode')\n              span(v-if='!emailCodeWait') 发送验证码\n              span(v-else='') {{`${emailCodeWaitTime}秒后重试`}}\n        FormItem(label='验证码', :label-width='80')\n          Row(type='flex', :gutter='16')\n            Input(v-model='settingInfo.emailVcode', placeholder='请输入验证码')\n    div(slot='footer')\n      Button(size='small', type='default', @click='closeModal')\n        | 取消\n      Button(size='small', type='success', @click=\"confirmBind('email')\")\n        | 确定\n  Modal(v-model='bindWxModal', :mask-closable='false')\n    div(slot='header') 绑定微信\n    .modal-body.bind-wx\n      bindWx\n    div(slot='footer')\n      Button(size='small', type='default', @click='closeModal')\n        | 取消\n</template>\n\n<script>\nimport { uploadFile } from '@/api/file'\nimport { getCaptcha, validateCaptcha, sendSmsCode, sendEmailVcode } from '@/api/sms'\nimport { savePhone, saveEmail, saveAccountInfo } from '@/api/accountSetting'\n\nimport bindWx from '@/components/weixin-login'\n\nexport default {\n  name: 'account-setting',\n  components: {\n    bindWx\n  },\n  data () {\n    return {\n      bindPhoneModal: false,\n      bindEmailModal: false,\n      bindWxModal: false,\n      userInfo: {},\n      captchaUrl: '',\n      captcha: '',\n      captchaUuid: '',\n      smsWait: false,\n      smsWaitTime: 60,\n      emailCodeWait: false,\n      emailCodeWaitTime: 60,\n      emailCodeUuid: '',\n      settingInfo: {\n        phone: '',\n        smsVcode: '',\n        email: '',\n        emailVcode: '',\n        id: 0\n      }\n    }\n  },\n  computed: {\n    avatarUrl () {\n      if (this.userInfo.avatar) {\n        return this.$avatarUrl.replace('avatarID', this.userInfo.avatar)\n      } else {\n        return null\n      }\n    }\n  },\n  created () {\n    this.userInfo = this.deepCopy(this.$store.getters['user/userInfo'])\n    this.initeSettingInfo()\n  },\n  methods: {\n    uploadImage () {\n      this.$refs.avatarInput.click()\n    },\n    selectedImage (e) {\n      const file = e.target.files[0]\n      uploadFile(file).then(resp => {\n        this.userInfo.avatar = resp.data\n        this.$store.commit('user/setUserInfo', this.userInfo)\n      })\n    },\n    initeSettingInfo () {\n      this.settingInfo = {\n        phone: '',\n        smsVcode: '',\n        email: '',\n        emailVcode: '',\n        id: this.userInfo.id\n      }\n    },\n    async validateCaptcha () {\n      const validateResp = await validateCaptcha({ captcha: this.captcha, uuid: this.captchaUuid })\n      if (!validateResp.response.success) {\n        this.$Message.error('验证码错误，请重新输入！')\n        this.refreshCaptcha()\n        return false\n      } else {\n        return true\n      }\n    },\n    refreshCaptcha () {\n      getCaptcha().then(resp => {\n        this.captchaUrl = `data:image;base64,${resp.data.image}`\n        this.captchaUuid = resp.data.uuid\n      })\n    },\n    async sendEmailVcode () {\n      if (this.captcha.replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入验证码！')\n        return\n      }\n      if (('' + this.settingInfo.email).replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入邮箱地址！')\n        return\n      }\n      if (!await this.validateCaptcha()) {\n        return\n      }\n      this.emailCodeWait = true\n      this.emailCodeWaitTime = 60\n      const timer = setInterval(() => {\n        if (this.emailCodeWaitTime <= 1) {\n          clearInterval(timer)\n          this.emailCodeWait = false\n        }\n        this.emailCodeWaitTime = this.emailCodeWaitTime - 1\n      }, 1000)\n      sendEmailVcode({ email: this.settingInfo.email, type: 1, captcha: this.captcha, captchaUuid: this.captchaUuid }).then(resp => {\n        if (resp.response.success) {\n          this.$Message.success('邮件发送成功！')\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      })\n    },\n    async sendSms () {\n      if (this.captcha.replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入验证码！')\n        return\n      }\n      if (('' + this.settingInfo.phone).replace(/\\s/g, '') === '') {\n        this.$Message.warning('请输入手机号码！')\n        return\n      }\n      if (!await this.validateCaptcha()) {\n        return\n      }\n      this.smsWait = true\n      this.smsWaitTime = 60\n      const timer = setInterval(() => {\n        if (this.smsWaitTime <= 1) {\n          clearInterval(timer)\n          this.smsWait = false\n        }\n        this.smsWaitTime = this.smsWaitTime - 1\n      }, 1000)\n      sendSmsCode({ phone: this.settingInfo.phone, type: 3, captcha: this.captcha, captchaUuid: this.captchaUuid }).then(resp => {\n        if (resp.response.success) {\n          this.$Message.success('短信发送成功！')\n        } else {\n          this.$Message.error(resp.response.msg)\n        }\n      })\n    },\n    confirmBind (type) {\n      switch (type) {\n        case 'phone': {\n          const { id, phone, smsVcode } = this.settingInfo\n          savePhone({ id, phone, smsVcode }).then(resp => {\n            if (resp.response.success) {\n              this.userInfo.phone = this.settingInfo.phone\n              this.$Message.success('绑定成功！')\n              this.closeModal()\n            } else {\n              this.$Message.error(resp.response.msg)\n            }\n          })\n          break\n        }\n        case 'email': {\n          const { id, email, emailVcode } = this.settingInfo\n          saveEmail({ id, email, emailVcode }).then(resp => {\n            if (resp.response.success) {\n              this.userInfo.email = this.settingInfo.email\n              this.$Message.success('绑定成功！')\n              this.closeModal()\n            } else {\n              this.$Message.error(resp.response.msg)\n            }\n          })\n          break\n        }\n        default:\n          break\n      }\n    },\n    saveUserInfo () {\n      const { avatar, id, name } = this.userInfo\n      saveAccountInfo({ avatar, id, name }).then(resp => {\n        if (resp.response.success) {\n          this.$store.commit('user/setUserInfo', this.userInfo)\n        }\n      })\n    },\n    closeModal () {\n      this.bindPhoneModal = false\n      this.bindEmailModal = false\n      this.bindWxModal = false\n      this.captcha = ''\n      this.initeSettingInfo()\n    },\n    bindWxSuccess (params) {\n      this.$Message.success('绑定成功！')\n      this.closeModal()\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.account-setting-page\n  text-align center\n  overflow auto\n  .account-setting-title\n    // flex 0 0 auto\n  .account-setting-body\n    flex 0 0 auto\n    padding 0.5rem\n    flex-direction column\n    align-items center\n    flex-wrap nowrap\n    .form-body\n      flex 0 0 auto\n      .avatar-image\n        width 64px\n        height 64px\n        cursor pointer\n        border 1px solid rgba(0,0,0,0.1)\n      .avatar-bomb\n        color: rgba(0,0,0,0.3);\n        width: 64px;\n        height: 64px;\n        padding: 2px;\n        line-height: 1.5;\n        display: flex;\n        align-items: center;\n        border: 1px dotted rgba(0,0,0,0.4);\n        user-select: none;\n        cursor: pointer;\n    .save-button\n      // flex 1 0 auto\n\n.modal-body\n  &.bind-wx\n    display flex\n    justify-content center\n    flex-direction column\n    flex-wrap nowrap\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountSetting.vue?vue&type=template&id=3e74a96a&scoped=true&lang=pug&\"\nimport script from \"./AccountSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AccountSetting.vue?vue&type=style&index=0&id=3e74a96a&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e74a96a\",\n  null\n  \n)\n\ncomponent.options.__file = \"AccountSetting.vue\"\nexport default component.exports"],"sourceRoot":""}