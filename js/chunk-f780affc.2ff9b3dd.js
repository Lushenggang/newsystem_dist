(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f780affc"],{1377:function(e,t,a){"use strict";var o=a("638e"),s=a.n(o);s.a},"15e3":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Cascader",{attrs:{data:e.professionalData,"change-on-select":""},on:{"on-change":e.select},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},s=[],n=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("f400"),a("c5f6"),a("e668")),r={name:"professional-selector",props:{professionalId:{type:Number|String,required:!0}},data:function(){return{selected:[],professionalData:[],professionalMap:new Map}},created:function(){this.getProfessionalList()},watch:{professionalId:function(){this.makeSelected()}},computed:{},methods:{getProfessionalList:function(){var e=this;Object(n["getProfessionalList"])({}).then(function(t){t.response.success?(e.professionalData=e.makeData(t.data),e.makeSelected()):e.$Message.error(t.response.msg)}).catch(function(e){console.error(e)})},select:function(e,t){this.$emit("on-select",t[t.length-1])},makeData:function(e){var t=[],a=[],o=!0,s=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var i=r.value;i.value=i.id,i.label=i.name,this.professionalMap.set(i.id,i),i.parentId?a.push(i):t.push(i)}}catch(e){s=!0,n=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw n}}for(var c=0;c<a.length;c++){var p=a[c],f=this.professionalMap.get(p.parentId);if(!f)return;f.children?f.children.push(p):f.children=[p]}return t},makeSelected:function(){if(this.professionalId&&this.professionalMap.size){this.selected=[this.professionalId];var e=this.professionalMap.get(this.professionalId),t=e?this.professionalMap.get(e.parentId):null;while(t)this.selected.splice(0,0,t.id),t=this.professionalMap.get(t.parentId)}}}},l=r,i=(a("1377"),a("2877")),c=Object(i["a"])(l,o,s,!1,null,null,null);c.options.__file="professional-selector.vue";var p=c.exports;t["a"]=p},"638e":function(e,t,a){},a2e8:function(e,t,a){"use strict";var o=a("d310"),s=a.n(o);s.a},ca23:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"problem-detail-page"},[a("Row",{staticClass:"tool-bar"},[a("a",{attrs:{href:"javascript: void(0)"},on:{click:function(t){e.$router.go(-1)}}},[a("icon",{attrs:{type:"ios-arrow-back"}}),e._v("\n      返回\n    ")],1),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.saveProblem(t)}}},[e._v("保存")])],1)]),a("Form",{staticClass:"problem-form",attrs:{"label-width":36}},[a("FormItem",{attrs:{model:e.problemData,label:"分类"}},[a("professionalSelector",{attrs:{professionalId:e.problemData.professionId},on:{"on-select":function(t){e.problemData.professionId=t.id,e.problemData.tagInfo=[]}}})],1),a("FormItem",{attrs:{label:"标题"}},[a("Input",{model:{value:e.problemData.title,callback:function(t){e.$set(e.problemData,"title",t)},expression:"problemData.title"}})],1),a("FormItem",{attrs:{label:"标签"}},[a("tagSelector",{attrs:{professionalId:e.problemData.professionId},model:{value:e.problemData.tagInfo,callback:function(t){e.$set(e.problemData,"tagInfo",t)},expression:"problemData.tagInfo"}})],1),a("mavon-editor",{staticClass:"md-editor",attrs:{scrollStyle:!0,placeholder:"请输入内容"},on:{fullScreen:e.toggleFullScreen,change:e.contentChange},model:{value:e.problemData.content,callback:function(t){e.$set(e.problemData,"content",t)},expression:"problemData.content"}})],1)],1)},s=[],n=(a("a481"),a("15e3")),r=a("5d0b"),l=a("9d9a"),i={name:"problem-detail",components:{professionalSelector:n["a"],tagSelector:r["a"]},data:function(){return{fullScreen:!1,problemData:{title:"",sort:0,content:"",tagId:[],professionId:0,tagInfo:[],range:1,type:1}}},created:function(){var e=this;"detail"===this.$route.params.type&&Object(l["getProblemDetail"])({id:this.$route.params.id}).then(function(t){t.response.success&&(t.data.tagInfo=t.data.tagInfo?t.data.tagInfo:[],t.data.professionId=t.data.professionId?t.data.professionId:0,e.problemData=t.data)})},methods:{toggleFullScreen:function(e){this.$store.commit("layout/toggleFullScreen",!1)},contentChange:function(e,t){this.problemData.content=e},saveProblem:function(){var e=this;Object(l["saveProblem"])(this.problemData).then(function(t){t.response.success&&(e.$Message.success("保存成功！"),e.$router.replace({name:"Problem"}))})}}},c=i,p=(a("a2e8"),a("2877")),f=Object(p["a"])(c,o,s,!1,null,"adee24e2",null);f.options.__file="ProblemDetail.vue";t["default"]=f.exports},d310:function(e,t,a){}}]);
//# sourceMappingURL=chunk-f780affc.2ff9b3dd.js.map