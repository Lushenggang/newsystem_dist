(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90553430"],{"26f3":function(a,t,e){},"5a66":function(a,t,e){"use strict";var r=e("fab38"),l=e.n(r);l.a},"6f7b":function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("Layout",{staticClass:"law-page"},[e("Row",{staticStyle:{"flex-wrap":"nowrap",height:"100%"},attrs:{type:"flex"}},[e("Card",{staticStyle:{width:"240px",flex:"0 0 auto",height:"100%"},attrs:{title:"分类",bordered:!0,"dis-hover":"",padding:8}},[e("Button",{attrs:{slot:"extra",type:"primary",size:"small"},nativeOn:{click:function(t){a.addLawCategory()}},slot:"extra"},[a._v("添加")]),e("Tree",{attrs:{render:a.renderCategory,data:a.lawCategoryList}})],1),e("Layout",{staticClass:"law-out",staticStyle:{width:"0","margin-left":"0.5rem",display:"flex","flex-direction":"column"}},[e("Card",{staticStyle:{flex:"1 1 auto"},attrs:{"dis-hover":"",padding:8}},[e("Row",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{slot:"title"},slot:"title"},[e("Breadcrumb",a._l(a.breadcrumbs,function(t,r){return e("BreadcrumbItem",{key:r,staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){a.clickBrc(t,r)}}},[a._v(a._s(t.title))])}))],1),e("span",{attrs:{slot:"extra"},slot:"extra"},[1===a.breadcrumbs.length?e("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){a.$router.push({name:"LawDetail",params:{type:"new",id:0,category:a.breadcrumbs[0].path.params.categoryId}})}}},[a._v("添加法律")]):a._e(),a.breadcrumbs.length>1?e("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){a.addLawChapter()}}},[a._v("添加章节")]):a._e(),a.breadcrumbs.length>1?e("Button",{staticStyle:{"margin-left":"0.5rem"},attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){a.addLawItem()}}},[a._v("添加法条")]):a._e()],1),e("router-view")],1)],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:"编辑分类",loading:!0},on:{"on-ok":a.saveCategory},model:{value:a.addLawCategoryModal,callback:function(t){a.addLawCategoryModal=t},expression:"addLawCategoryModal"}},[e("Form",{attrs:{model:a.lawCategoryData}},[e("FormItem",{attrs:{label:"名称"}},[e("Input",{model:{value:a.lawCategoryData.name,callback:function(t){a.$set(a.lawCategoryData,"name",t)},expression:"lawCategoryData.name"}})],1),e("FormItem",{attrs:{label:"别名"}},[e("Input",{model:{value:a.lawCategoryData.alias,callback:function(t){a.$set(a.lawCategoryData,"alias",t)},expression:"lawCategoryData.alias"}})],1),e("FormItem",{attrs:{label:"检索索引"}},[e("Input",{attrs:{value:a.lawCategoryData.keywords},on:{"on-change":a.keywordsChange}})],1),e("FormItem",{attrs:{label:"显示顺序"}},[e("Input",{model:{value:a.lawCategoryData.sort,callback:function(t){a.$set(a.lawCategoryData,"sort",t)},expression:"lawCategoryData.sort"}})],1)],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:"编辑章节",loading:!0},on:{"on-ok":a.saveChapter},model:{value:a.addLawChapterModal,callback:function(t){a.addLawChapterModal=t},expression:"addLawChapterModal"}},[e("Form",{attrs:{model:a.lawChapterData}},[e("FormItem",{attrs:{label:"名称"}},[e("Input",{model:{value:a.lawChapterData.title,callback:function(t){a.$set(a.lawChapterData,"title",t)},expression:"lawChapterData.title"}})],1)],1)],1),e("Modal",{attrs:{"mask-closable":!1,title:"编辑法条",loading:!0},on:{"on-ok":a.saveLawItem},model:{value:a.addLawItemModal,callback:function(t){a.addLawItemModal=t},expression:"addLawItemModal"}},[e("Form",{attrs:{model:a.lawItemData}},[e("FormItem",{attrs:{label:"标题"}},[e("Input",{model:{value:a.lawItemData.title,callback:function(t){a.$set(a.lawItemData,"title",t)},expression:"lawItemData.title"}})],1),e("FormItem",{attrs:{label:"标签"}},[e("tagSelector",{model:{value:a.lawItemData.tagInfo,callback:function(t){a.$set(a.lawItemData,"tagInfo",t)},expression:"lawItemData.tagInfo"}})],1),e("FormItem",{attrs:{label:"分值"}},[e("Input",{model:{value:a.lawItemData.score,callback:function(t){a.$set(a.lawItemData,"score",t)},expression:"lawItemData.score"}})],1),e("FormItem",{attrs:{label:"排序"}},[e("Input",{model:{value:a.lawItemData.sort,callback:function(t){a.$set(a.lawItemData,"sort",t)},expression:"lawItemData.sort"}})],1),e("FormItem",{attrs:{label:"内容"}},[e("Input",{attrs:{type:"textarea"},model:{value:a.lawItemData.content,callback:function(t){a.$set(a.lawItemData,"content",t)},expression:"lawItemData.content"}})],1)],1)],1)],1)},l=[],o=(e("ac4d"),e("8a81"),e("ac6a"),e("f400"),e("a481"),e("7f7f"),e("5189")),n=e("5d0b"),s={categoryId:null,content:"",documentLevel:0,id:null,keywords:"",lawId:null,level:0,parentId:null,score:0,sort:0,tagInfo:[],title:""},i={name:"law",components:{tagSelector:n["a"]},data:function(){return{addLawCategoryModal:!1,addLawChapterModal:!1,lawCategoryData:{alias:"",keywords:"",level:0,name:"",parentId:null,sort:0,treePath:""},lawChapterData:this.deepCopy(s),addLawItemModal:!1,lawItemData:this.deepCopy(s),lawCategoryList:[],currentCategory:null,currentLaw:null}},created:function(){var a=this;this.getCategoryList(),this.breadcrumbs.length&&this.$router.push(this.breadcrumbs[this.breadcrumbs.length-1].path),window.addEventListener("popstate",function(){a.$store.commit("law/navPop")})},watch:{},computed:{breadcrumbs:function(){return this.$store.state.law.breadcrumbs}},methods:{clickBrc:function(a,t){this.$store.commit("law/navReplace",this.breadcrumbs.slice(0,t+1)),this.$router.push(a.path)},resetCategoryData:function(){this.lawCategoryData={alias:"",keywords:"",level:0,name:"",parentId:null,sort:0,treePath:""}},addLawCategory:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.resetCategoryData(),a&&(this.lawCategoryData.parentId=a.id),this.addLawCategoryModal=!0},editCategory:function(a){this.lawCategoryData=a,this.addLawCategoryModal=!0},saveCategory:function(){var a=this;Object(o["saveCategory"])(this.lawCategoryData).then(function(t){t.data;var e=t.response;e.success?(a.$Message.success("保存成功！"),a.addLawCategoryModal=!1,a.getCategoryList()):a.$Message.error(e.msg)})},deleteCategory:function(a){var t=this;this.$Modal.confirm({title:"提示",content:"删除之后无法恢复，请确定是否删除？",onCancel:function(){},onOk:function(){Object(o["deleteCategory"])({id:a.id}).then(function(a){a.data;var e=a.response;e.success?(t.$Message.success("删除成功！"),t.getCategoryList()):t.$Message.error(e.msg)})}})},getCategoryList:function(){var a=this;Object(o["getCategoryList"])({}).then(function(t){var e=t.response,r=t.data;e.success?(a.lawCategoryList=a.makeData(r),console.log(a.lawCategoryList)):console.error(e.msg)})},addLawChapter:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addLawChapterModal=!0},saveChapter:function(){var a=this;this.lawChapterData.lawId=this.$store.state.law.currentLaw.id,this.lawChapterData.parentId=this.$store.state.law.currentChapter||null,this.lawChapterData.leaf=0,Object(o["saveLawItem"])(this.lawChapterData).then(function(t){t.data;var e=t.response;e.success&&(a.addLawChapterModal=!1,a.lawChapterData=a.deepCopy(s),a.$store.commit("law/publish","reload-law-item"))})},addLawItem:function(){this.addLawItemModal=!0},saveLawItem:function(){var a=this;this.lawItemData.lawId=this.$store.state.law.currentLaw.id,this.lawItemData.parentId=this.$store.state.law.currentChapter||null,this.lawItemData.leaf=1,Object(o["saveLawItem"])(this.lawItemData).then(function(t){t.data;var e=t.response;e.success&&(a.addLawItemModal=!1,a.lawItemData=a.deepCopy(s),a.$store.commit("law/publish","reload-law-item"))})},renderCategory:function(a,t){var e=this,r=(t.root,t.node,t.data);return a("span",[a("Tag",{props:{color:"blue"},nativeOn:{click:function(){e.currentCategory=r,e.$store.commit("law/navReplace",[{title:r.name,path:{name:"LawList",params:{categoryId:r.id}}}]),e.$router.push({name:"LawList",params:{categoryId:r.id}})}}},r.name),a("Button",{props:{size:"small",type:"default",icon:"md-create"},style:{marginLeft:"0.5rem"},nativeOn:{click:function(){e.editCategory(r)}}}),a("Button",{props:{size:"small",type:"success",icon:"md-add"},style:{marginLeft:"0.2rem"},nativeOn:{click:function(){e.addLawCategory(r)}}}),a("Button",{props:{size:"small",type:"error",icon:"md-trash"},style:{marginLeft:"0.2rem"},nativeOn:{click:function(){e.deleteCategory(r)}}})])},keywordsChange:function(a){this.lawCategoryData.keywords=a.target.value.replace(/，/g,",")},changeLawItemPage:function(a){this.lawItemPagination.page=a,this.getLawItemList()},changeLawItemPageSize:function(a){this.lawItemPagination.pageSize=a,this.getLawItemList()},makeData:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!a)return[];var t=[],e=[],r=new Map,l=!0,o=!1,n=void 0;try{for(var s,i=a[Symbol.iterator]();!(l=(s=i.next()).done);l=!0){var c=s.value;c.expand=!0,r.set(c.id,c),c.parentId?e.push(c):t.push(c)}}catch(a){o=!0,n=a}finally{try{l||null==i.return||i.return()}finally{if(o)throw n}}for(var d=0;d<e.length;d++){var u=e[d],m=r.get(u.parentId);if(!m)return;m.children?m.children.push(u):m.children=[u]}return t}}},c=i,d=(e("fd5c"),e("5a66"),e("2877")),u=Object(d["a"])(c,r,l,!1,null,"485cb19c",null);u.options.__file="Law.vue";t["default"]=u.exports},fab38:function(a,t,e){},fd5c:function(a,t,e){"use strict";var r=e("26f3"),l=e.n(r);l.a}}]);
//# sourceMappingURL=chunk-90553430.80209116.js.map