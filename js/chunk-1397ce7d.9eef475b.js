(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1397ce7d"],{"0c36":function(t,e,a){},"10ac":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticClass:"document-page"},[a("Card",{staticClass:"contents"},[a("template",{slot:"title"},[a("Row",{staticClass:"tool-bar",attrs:{type:"flex"}},[a("div",{staticClass:"left"},[a("Input",{staticClass:"search-input",attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getDocumentList(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[a("Button",{attrs:{slot:"append",icon:"md-search"},nativeOn:{click:function(e){return t.getDocumentList(e)}},slot:"append"})],1)],1),a("div",{staticClass:"right"},[a("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addNewDocument(e)}}},[t._v("新增")])],1)]),a("Row",{staticClass:"tags"},[a("Tag",{attrs:{color:"success"},nativeOn:{click:function(e){return t.searchTag(e)}}},[t._v("全部")]),t._l(t.tagList,function(e,n){return a("Tag",{key:n,attrs:{color:"success"},nativeOn:{click:function(a){t.searchTag(e)}}},[t._v(t._s(e.tagName))])})],2)],1),a("Row",{staticClass:"document-list"},[a("Tabs",{attrs:{value:"testDoc"}},[a("TabPane",{attrs:{label:"测试文档",name:"testDoc"}},[a("ul",{staticClass:"doc-list"},t._l(t.testDocList,function(e,n){return a("li",{key:n,class:{selected:t.currentDoc.id===e.id},on:{click:function(a){t.currentDoc=e}}},[a("a",{staticClass:"doc-title",attrs:{href:"javascript:void(0)",title:e.title}},[a("Icon",{attrs:{type:"md-document"}}),t._v("\n                "+t._s(e.title)+"\n              ")],1),a("div",{staticClass:"doc-btns"},[a("Button",{staticClass:"doc-btn",attrs:{size:"small",type:"primary"},nativeOn:{click:function(a){a.stopPropagation(),t.editDocument(e)}}},[t._v("编辑")]),a("Button",{staticClass:"doc-btn",attrs:{size:"small",type:"error"},nativeOn:{click:function(a){a.stopPropagation(),t.deleteDocument(e.id)}}},[t._v("删除")])],1)])}))]),a("TabPane",{attrs:{label:"操作文档",name:"operateDoc"}},[a("ul",{staticClass:"doc-list"},t._l(t.operateDocList,function(e,n){return a("li",{key:n,class:{selected:t.currentDoc.id===e.id},on:{click:function(a){t.currentDoc=e}}},[a("a",{staticClass:"doc-title",attrs:{href:"javascript:void(0)",title:e.title}},[a("Icon",{attrs:{type:"md-document"}}),t._v("\n                "+t._s(e.title)+"\n              ")],1),a("div",{staticClass:"doc-btns"},[a("Button",{staticClass:"doc-btn",attrs:{size:"small",type:"primary"},nativeOn:{click:function(a){a.stopPropagation(),t.editDocument(e)}}},[t._v("编辑")]),a("Button",{staticClass:"doc-btn",attrs:{size:"small",type:"error"},nativeOn:{click:function(a){a.stopPropagation(),t.deleteDocument(e.id)}}},[t._v("删除")])],1)])}))])],1)],1)],2),a("Card",{staticClass:"document-detail"},[a("mavon-editor",{staticClass:"md-editor",attrs:{boxShadow:!1,editable:!1,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,scrollStyle:!1,placeholder:"使用文档",navigation:!1},model:{value:t.currentDoc.content,callback:function(e){t.$set(t.currentDoc,"content",e)},expression:"currentDoc.content"}})],1)],1)},s=[],c=a("424e"),i=a("db6a"),o=function(){return{content:"# 欢迎使用文档系统\n\n>请选择要查看的文档或者新增一个文档",id:null,professionId:null,range:1,sort:0,tagInfo:[],title:"",type:2}},r={name:"document",data:function(){return{searchKey:"",testDocList:[],operateDocList:[],paginationData:{page:1,pageSize:10,total:0},tagList:[],selectedTag:null,documentData:{content:"# 标题"},currentDoc:o()}},computed:{},created:function(){this.getTestDocList(),this.getOperateDocList(),this.getTagList()},mounted:function(){},methods:{getTagList:function(){var t=this;Object(i["getTagesByRelation"])({type:6}).then(function(e){var a=e.data,n=e.response;n.success?t.tagList=a:t.$Message.error(n.msg)})},getTestDocList:function(){var t=this;Object(c["getDocumentList"])({pageNo:this.paginationData.page,pageSize:this.paginationData.pageSize,title:this.searchKey,tagId:this.selectedTag?this.selectedTag.tagId:null,type:2}).then(function(e){e.response.success?(t.testDocList=e.data.result,t.paginationData.total=e.data.totalCount):t.$Message.error(e.response.msg)}).catch(function(t){console.error(t)})},getOperateDocList:function(){var t=this;Object(c["getDocumentList"])({pageNo:this.paginationData.page,pageSize:this.paginationData.pageSize,title:this.searchKey,tagId:this.selectedTag?this.selectedTag.tagId:null,type:3}).then(function(e){e.response.success?(t.operateDocList=e.data.result,t.paginationData.total=e.data.totalCount):t.$Message.error(e.response.msg)}).catch(function(t){console.error(t)})},addNewDocument:function(){this.$router.push({name:"EditDocument",params:{type:"new",id:0}})},editDocument:function(t){this.$router.push({name:"EditDocument",params:{type:"detail",id:t.id}})},deleteDocument:function(t){var e=this;this.$Modal.confirm({title:"警告！",content:"删除操作不可撤销，是否确定删除？",onCancel:function(){},onOk:function(){Object(c["deleteDocument"])({ids:[t]}).then(function(t){t.data;var a=t.response;a.success&&(e.$Message.success("删除成功！"),e.getTestDocList(),e.getOperateDocList(),e.currentDoc=o())})}})},changePage:function(t){this.paginationData.page=t,this.getDocumentList()},changePageSize:function(t){this.paginationData.pageSize=t,this.getDocumentList()},searchTag:function(t){this.selectedTag=t,this.getDocumentList()}}},l=r,u=(a("6c4a"),a("decf"),a("2877")),d=Object(u["a"])(l,n,s,!1,null,"71464cc8",null);d.options.__file="Document.vue";e["default"]=d.exports},"6c4a":function(t,e,a){"use strict";var n=a("0c36"),s=a.n(n);s.a},"8e76":function(t,e,a){},decf:function(t,e,a){"use strict";var n=a("8e76"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-1397ce7d.9eef475b.js.map