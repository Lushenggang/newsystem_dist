(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b5b7c9a"],{"0d06":function(t,e,r){"use strict";var n=r("68b7"),i=r.n(n);i.a},"68b7":function(t,e,r){},b2b9:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"answerRecord",staticClass:"answer-record-page"},[t.recordId?t._e():r("div",{staticClass:"answer-record-filter"},[r("div",{staticClass:"filter-title"},[t._v("根项目：")]),r("Select",{staticClass:"filter-select",model:{value:t.rootProject,callback:function(e){t.rootProject=e},expression:"rootProject"}},t._l(t.projectList,function(e,n){return r("Option",{key:n,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),r("div",{staticClass:"filter-title"},[t._v("子项目：")]),r("Select",{staticClass:"filter-select",model:{value:t.childProject,callback:function(e){t.childProject=e},expression:"childProject"}},t._l(t.childrenList,function(e,n){return r("Option",{key:n,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])}))],1),t.recordId?r("div",{staticClass:"detail"},[r("div",{staticClass:"detail-menu"},[r("div",{staticClass:"project-data"},[r("div",{staticClass:"project-name",on:{click:t.pushToPage}},[t._v("\n          "+t._s(t.projectInfo.name)+"\n        ")]),t._v("\n          的做题记录\n      ")]),t._m(0)]),r("div",{staticClass:"detail-content"},[r("div",{staticClass:"answer-record"},[r("div",{staticClass:"answer-record-title"},[t._v("\n          做题记录\n        ")]),t.recordDetail.length?r("Tree",{staticClass:"answer-record-tree",attrs:{treeData:t.recordDetail,nodeClass:"tree-node-container",expand:!1},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data,i=e.parentData;return r("div",{staticClass:"node-render-content",class:{"root-node-content":i.isRoot}},[i.isRoot?r("span",{staticClass:"root-node-title"},[t._v("\n              "+t._s(i.children.findIndex(function(t){return t.id===n.id})+1+". ")+"\n            ")]):t._e(),t._v("\n            "+t._s(n.title)+"\n          ")])}}])}):r("div",{staticClass:"notice"},[t._v("\n          无详细记录信息\n        ")])],1),r("div",{staticClass:"report"},[r("div",{staticClass:"report-title"},[t._v("报告")]),r("div",{staticClass:"report-content"},[r("div",{staticClass:"content",domProps:{innerHTML:t._s(t.reportContent)}})])])])]):r("div",{ref:"table",staticClass:"table"},[r("Table",{attrs:{height:t.tableHeight,columns:t.columns,data:t.recordList,width:t.size.width,border:""}})],1)])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"answer-menu"},[r("div",[t._v("设为测试用例")])])}],o=(r("ac4d"),r("8a81"),r("ac6a"),r("20d6"),r("8afe")),a=(r("96cf"),r("3040")),s=(r("cadf"),r("551c"),r("097d"),r("2ac8")),c=r("52e7"),d=r("339e"),l=r.n(d),u=r("24d2"),h={components:{Tree:c["a"]},data:function(){var t=this;return{projectInfo:{},recordList:[],columns:[{title:"项目名称",key:"projectName",sortable:!0},{title:"客户",key:"customer",sortable:!0},{title:"用户标识",key:"userId",sortable:!0},{title:"联系电话",key:"phone",sortable:!0},{title:"设备",key:"device",sortable:!0},{title:"IP",key:"ip",sortable:!0},{title:"做题时间",key:"updateTime",sortable:!0},{title:"做题时长",key:"time",sortable:!0},{title:"步骤",key:"step",sortable:!0},{title:"操作",key:"action",align:"center",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},on:{click:function(){t.showRecordDetail(r.index)}}},"详情")])}}],size:{width:0,height:0},tableHeight:0,recordDetail:[],reportContent:"",converter:null,projectList:[{id:"default",name:"全部项目"}],childrenList:[{id:"default",name:"全部子项目"}],childProject:"default",rootProject:"default"}},computed:{recordId:function(){return this.$route.query.recordId||""},all:function(){return"default"===this.childProject},lookProject:function(){var t=this.childProject;return"default"===t&&(t="default"===this.rootProject?"":this.rootProject),t}},watch:{recordId:function(){this.recordId&&(this.calSize(),this.getRecordDetail(),this.getReportContent(this.recordId),this.getProjectDetail())},rootProject:function(t,e){t!==e&&this.getChildProjectList()},lookProject:{immediate:!0,handler:function(){var t=this;this.$nextTick(function(){t.getRecordList()})}}},mounted:function(){this.childProject=this.$route.query.projectId||"default",this.rootProject=this.$route.query.rootId||"default",this.converter||(this.converter=new l.a.Converter({literalMidWordUnderscores:!0})),this.calSize(),this.getProjectList(),window.addEventListener("resize",this.calSize),this.recordId&&(this.getRecordDetail(),this.getReportContent(this.recordId)),this.getProjectDetail()},beforeDestroy:function(){window.removeEventListener("resize",this.calSize)},methods:{getProjectList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={},t.next=3,u["default"].getRootProjectList(e);case 3:r=t.sent,r&&(this.projectList=[{id:"default",name:"全部项目"}],(n=this.projectList).push.apply(n,Object(o["a"])(r)));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getChildProjectList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r,n,i,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.childrenList=[{id:"default",name:"全部子项目"}],!this.rootProject||"default"===this.rootProject){t.next=8;break}return e={id:this.rootProject},t.next=5,u["default"].getProjectList(e);case 5:r=t.sent,r&&(i=r.findIndex(function(t){return t.id===s.rootProject}),-1!==i&&(a=r.splice(i,1),r.unshift.apply(r,Object(o["a"])(a))),(n=this.childrenList).push.apply(n,Object(o["a"])(r))),-1===r.findIndex(function(t){return t.id===s.childProject})&&(this.childProject="default");case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getRecordList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r,n,i,o,a,c,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={projectId:this.lookProject},t.next=3,s["default"].getHistoryAnswerRecord.apply(this,[e]);case 3:for(r=t.sent,n=!0,i=!1,o=void 0,t.prev=7,a=r[Symbol.iterator]();!(n=(c=a.next()).done);n=!0)d=c.value,d.time=Math.round((d.updateTime-d.createTime)/1e3)+" s",d.updateTime=this.formatTime(d.updateTime);t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),i=!0,o=t.t0;case 15:t.prev=15,t.prev=16,n||null==a.return||a.return();case 18:if(t.prev=18,!i){t.next=21;break}throw o;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.recordList=r||[];case 24:case"end":return t.stop()}},t,this,[[7,11,15,23],[16,,18,22]])}));return function(){return t.apply(this,arguments)}}(),getProjectDetail:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.query.detailId){t.next=4;break}return t.next=3,u["default"].getProjectDetail({id:this.$route.query.detailId});case 3:this.projectInfo=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showRecordDetail:function(t){var e=this.recordList[t];this.$router.push({name:"AnswerRecord",query:{detailId:e.projectId,recordId:e.id}})},getRecordDetail:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={recordId:this.recordId},t.next=3,s["default"].getAnswerRecord.apply(this,[e]);case 3:r=t.sent,r?this.recordDetail=r:this.$Message.error("获取做题记录失败");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getReportContent:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={recordId:e},t.next=3,s["default"].getReportContent.apply(this,[r]);case 3:n=t.sent,this.reportContent=this.converter.makeHtml(n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),calSize:function(){var t=this;this.$nextTick(function(){var e=t.$refs.answerRecord.getBoundingClientRect();t.size={width:e.width,height:e.height},t.$refs.table&&(e=t.$refs.table.getBoundingClientRect(),t.tableHeight=e.height)})},formatTime:function(t){var e=function(t){return t<10?"0"+t:t},r=new Date(t),n=r.getFullYear(),i=e(r.getMonth()+1),o=e(r.getDay()),a=e(r.getHours()),s=e(r.getMinutes()),c="".concat(n,"-").concat(i,"-").concat(o," ").concat(a,":").concat(s);return c},pushToPage:function(t){this.$router.push({name:"Page",params:{projectId:this.rootProject},query:{currentProject:t}})}}},f=h,p=(r("0d06"),r("2877")),v=Object(p["a"])(f,n,i,!1,null,null,null);v.options.__file="AnswerRecord.vue";e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-8b5b7c9a.f4d68f42.js.map